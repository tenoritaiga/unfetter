(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"+JSH":function(e,n,t){"use strict";t.r(n);var l=t("CcnG"),i=t("UodH"),a=t("FVSy"),r=t("de3e"),o=t("SMsm"),s=t("b716"),u=t("Y3Vf"),c=t("gIcY"),d=function(){this.title="",this.description="",this.created_by_ref=""},p=t("z6jJ"),b=function(){function e(e,n,t){this.formBuilder=e,this.location=n,this.store=t}return e.prototype.ngOnInit=function(){this.assessMeta=new d,this.resetForm(),this.store.dispatch(new u.Ka(this.assessMeta.title))},e.prototype.resetForm=function(e){var n;e&&e.preventDefault(),this.form=(n||(n=new d),new c.k({title:new c.h(n.title||"",c.x.required),description:new c.h(n.description||""),created_by_ref:new c.h(n.created_by_ref||"",c.x.required)}))},e.prototype.submitForm=function(){var e=new p.AssessmentSet;e.name=this.form.value.title,e.description=this.form.value.description,e.created_by_ref=this.form.value.created_by_ref,e.created=(new Date).toISOString(),e.assessments=[],e.metaProperties={published:!1},this.store.dispatch(new u.Ia(e))},e.prototype.formToAssessment=function(e){return Object.assign(new d,e.value)},e.prototype.onCancel=function(e){this.location.back()},e.prototype.onTitleBlur=function(e){this.store.dispatch(new u.Ka(this.form.value.title)),this.store.dispatch(new u.v(!0))},e.prototype.orgSelected=function(e){this.form.get("created_by_ref").patchValue(e)},e}(),f=t("FYXD"),m=t("ad02"),h=t("VnD/"),g=t("67Y/"),v=t("26FU"),y=function(){function e(e,n,t,l){this.store=e,this.location=n,this.router=t,this.changeDetectorRef=l,this.title=new v.a("").asObservable(),this.showBackButton=new v.a(!1).asObservable()}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;this.title=this.store.select("baseline").pipe(Object(h.a)(function(e){return void 0!==e}),Object(m.a)(),Object(f.a)("baseline"),Object(f.a)("name")),this.showBackButton=this.store.select("baseline").pipe(Object(f.a)("backButton"),Object(h.a)(function(e){return e&&"boolean"==typeof e}),Object(m.a)(),Object(g.a)(function(n){return e.changeDetectorRef.detectChanges(),n})),this.changeDetectorRef.detectChanges(),this.store.select("baseline").pipe(Object(f.a)("baseline"),Object(m.a)()).subscribe(function(n){e.baselineId=n.id},function(e){return console.log(e)})},e.prototype.onBack=function(e){this.router.navigate(["/baseline/result/summary/"+this.baselineId])},e}(),O=function(){},_=t("pMnS"),j=t("t68o"),C=t("NcP4"),A=t("0AQM"),w=t("bujt"),S=t("dWZg"),k=t("lLAP"),R=t("wFw1"),x=t("Mr+X"),P=t("Ip0R"),T=t("ZYCi"),E=t("yGQT"),M=l["\u0275crt"]({encapsulation:0,styles:[[".flex[_ngcontent-%COMP%]{display:flex}.flex[_ngcontent-%COMP%]   .flex-grow[_ngcontent-%COMP%]{flex:1 1 auto}.flex-cols[_ngcontent-%COMP%]{flex-direction:column}.titleWrapper[_ngcontent-%COMP%]{background:#cfd8dc;height:128px;position:relative}.contentWrapper[_ngcontent-%COMP%]{margin-top:-64px}.center[_ngcontent-%COMP%]{margin:0 auto}.title[_ngcontent-%COMP%]{position:absolute;margin-top:24px;margin-left:56px}.banner-wrapper[_ngcontent-%COMP%]{background-color:#cfd8dc;color:rgba(0,0,0,.87)}"]],data:{animation:[{type:7,name:"fadeInOut",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"0.1s ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"0.1s ease-in-out"}],options:null}],options:{}}]}});function B(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,4,"button",[["class","mat-24"],["mat-icon-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.onBack(t)&&l),l},w.d,w.b)),l["\u0275did"](2,180224,null,0,i.b,[l.ElementRef,S.a,k.h,[2,R.a]],null,null),(e()(),l["\u0275eld"](3,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,x.b,x.a)),l["\u0275did"](4,638976,null,0,o.a,[l.ElementRef,o.c,[8,null]],null,null),(e()(),l["\u0275ted"](-1,0,["keyboard_backspace"]))],function(e,n){e(n,4,0)},function(e,n){e(n,1,0,l["\u0275nov"](n,2).disabled||null,"NoopAnimations"===l["\u0275nov"](n,2)._animationMode),e(n,3,0,l["\u0275nov"](n,4).inline)})}function I(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"span",[],[[24,"@fadeInOut",0]],null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" "," "])),l["\u0275pid"](131072,P.b,[l.ChangeDetectorRef])],null,function(e,n){var t=n.component;e(n,0,0,void 0),e(n,1,0,l["\u0275unv"](n,1,0,l["\u0275nov"](n,2).transform(t.title)))})}function L(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","layout"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,7,"div",[["class","titleWrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,6,"span",[["class","title mat-title"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,2,null,B)),l["\u0275did"](4,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,P.b,[l.ChangeDetectorRef]),(e()(),l["\u0275and"](16777216,null,null,2,null,I)),l["\u0275did"](7,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["\u0275pid"](131072,P.b,[l.ChangeDetectorRef]),(e()(),l["\u0275eld"](9,0,null,null,3,"div",[["class","fadeIn flex contentWrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](10,0,null,null,2,"div",[["class","center"]],null,null,null,null,null)),(e()(),l["\u0275eld"](11,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l["\u0275did"](12,212992,null,0,T.q,[T.b,l.ViewContainerRef,l.ComponentFactoryResolver,[8,null],l.ChangeDetectorRef],null,null)],function(e,n){var t=n.component;e(n,4,0,l["\u0275unv"](n,4,0,l["\u0275nov"](n,5).transform(t.showBackButton))),e(n,7,0,l["\u0275unv"](n,7,0,l["\u0275nov"](n,8).transform(t.title))),e(n,12,0)},null)}var D=l["\u0275ccf"]("baseline-layout",y,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"baseline-layout",[],null,null,null,L,M)),l["\u0275did"](1,4308992,null,0,y,[E.n,P.j,T.l,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),q=t("seP3"),F=t("lzlj"),N=t("dJrM"),G=t("Wf4p"),W=t("Fzqc"),V=t("/VYK"),U=t("Ia4W"),z=t("/tn+"),H=t("KDw0"),$=l["\u0275crt"]({encapsulation:0,styles:[[".flex-cols[_ngcontent-%COMP%]{flex-direction:column}.mb-18[_ngcontent-%COMP%]{margin-bottom:18px}.assess-create-card[_ngcontent-%COMP%]{width:835px}.full-width[_ngcontent-%COMP%]{width:100%}.center[_ngcontent-%COMP%]{margin:0 auto}"]],data:{}});function Y(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),l["\u0275did"](1,16384,[[4,4]],0,q.b,[],null,null),(e()(),l["\u0275ted"](-1,null,[" Title is "])),(e()(),l["\u0275eld"](3,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["required"]))],null,function(e,n){e(n,0,0,l["\u0275nov"](n,1).id)})}function J(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,58,"div",[["class","center"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,57,"div",[["class","mb-18 unf-mat-card assess-create-card"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,56,"mat-card",[["class","mat-card"]],null,null,null,F.d,F.a)),l["\u0275did"](3,49152,null,0,a.a,[],null,null),(e()(),l["\u0275eld"](4,0,null,0,54,"form",[["class","assess-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,a=e.component;return"submit"===n&&(i=!1!==l["\u0275nov"](e,6).onSubmit(t)&&i),"reset"===n&&(i=!1!==l["\u0275nov"](e,6).onReset()&&i),"ngSubmit"===n&&(i=!1!==a.submitForm()&&i),i},null,null)),l["\u0275did"](5,16384,null,0,c.A,[],null,null),l["\u0275did"](6,540672,null,0,c.l,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),l["\u0275prd"](2048,null,c.c,null,[c.l]),l["\u0275did"](8,16384,null,0,c.s,[[4,c.c]],null,null),(e()(),l["\u0275eld"](9,0,null,null,41,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),l["\u0275did"](10,16384,null,0,a.d,[],null,null),(e()(),l["\u0275eld"](11,0,null,null,20,"mat-form-field",[["class","full-width mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,N.b,N.a)),l["\u0275did"](12,7389184,null,7,q.c,[l.ElementRef,l.ChangeDetectorRef,[2,G.j],[2,W.b],[2,q.a],S.a,l.NgZone,[2,R.a]],null,null),l["\u0275qud"](335544320,1,{_control:0}),l["\u0275qud"](335544320,2,{_placeholderChild:0}),l["\u0275qud"](335544320,3,{_labelChild:0}),l["\u0275qud"](603979776,4,{_errorChildren:1}),l["\u0275qud"](603979776,5,{_hintChildren:1}),l["\u0275qud"](603979776,6,{_prefixChildren:1}),l["\u0275qud"](603979776,7,{_suffixChildren:1}),(e()(),l["\u0275eld"](20,0,null,1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","title"],["matInput",""],["placeholder","Title"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,n,t){var i=!0,a=e.component;return"input"===n&&(i=!1!==l["\u0275nov"](e,21)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](e,21).onTouched()&&i),"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,21)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l["\u0275nov"](e,21)._compositionEnd(t.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](e,28)._focusChanged(!1)&&i),"focus"===n&&(i=!1!==l["\u0275nov"](e,28)._focusChanged(!0)&&i),"input"===n&&(i=!1!==l["\u0275nov"](e,28)._onInput()&&i),"blur"===n&&(i=!1!==a.onTitleBlur(t)&&i),i},null,null)),l["\u0275did"](21,16384,null,0,c.d,[l.Renderer2,l.ElementRef,[2,c.a]],null,null),l["\u0275did"](22,16384,null,0,c.w,[],{required:[0,"required"]},null),l["\u0275prd"](1024,null,c.o,function(e){return[e]},[c.w]),l["\u0275prd"](1024,null,c.p,function(e){return[e]},[c.d]),l["\u0275did"](25,671744,null,0,c.j,[[3,c.c],[6,c.o],[8,null],[6,c.p],[2,c.C]],{name:[0,"name"]},null),l["\u0275prd"](2048,null,c.q,null,[c.j]),l["\u0275did"](27,16384,null,0,c.r,[[4,c.q]],null,null),l["\u0275did"](28,999424,null,0,s.b,[l.ElementRef,S.a,[6,c.q],[2,c.t],[2,c.l],G.d,[8,null],V.a,l.NgZone],{placeholder:[0,"placeholder"],required:[1,"required"],value:[2,"value"]},null),l["\u0275prd"](2048,[[1,4]],q.d,null,[s.b]),(e()(),l["\u0275and"](16777216,null,5,1,null,Y)),l["\u0275did"](31,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](32,0,null,null,16,"mat-form-field",[["class","full-width mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,N.b,N.a)),l["\u0275did"](33,7389184,null,7,q.c,[l.ElementRef,l.ChangeDetectorRef,[2,G.j],[2,W.b],[2,q.a],S.a,l.NgZone,[2,R.a]],null,null),l["\u0275qud"](335544320,8,{_control:0}),l["\u0275qud"](335544320,9,{_placeholderChild:0}),l["\u0275qud"](335544320,10,{_labelChild:0}),l["\u0275qud"](603979776,11,{_errorChildren:1}),l["\u0275qud"](603979776,12,{_hintChildren:1}),l["\u0275qud"](603979776,13,{_prefixChildren:1}),l["\u0275qud"](603979776,14,{_suffixChildren:1}),(e()(),l["\u0275eld"](41,0,null,1,7,"textarea",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","description"],["matInput",""],["placeholder","Description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,n,t){var i=!0;return"input"===n&&(i=!1!==l["\u0275nov"](e,42)._handleInput(t.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](e,42).onTouched()&&i),"compositionstart"===n&&(i=!1!==l["\u0275nov"](e,42)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l["\u0275nov"](e,42)._compositionEnd(t.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](e,47)._focusChanged(!1)&&i),"focus"===n&&(i=!1!==l["\u0275nov"](e,47)._focusChanged(!0)&&i),"input"===n&&(i=!1!==l["\u0275nov"](e,47)._onInput()&&i),i},null,null)),l["\u0275did"](42,16384,null,0,c.d,[l.Renderer2,l.ElementRef,[2,c.a]],null,null),l["\u0275prd"](1024,null,c.p,function(e){return[e]},[c.d]),l["\u0275did"](44,671744,null,0,c.j,[[3,c.c],[8,null],[8,null],[6,c.p],[2,c.C]],{name:[0,"name"]},null),l["\u0275prd"](2048,null,c.q,null,[c.j]),l["\u0275did"](46,16384,null,0,c.r,[[4,c.q]],null,null),l["\u0275did"](47,999424,null,0,s.b,[l.ElementRef,S.a,[6,c.q],[2,c.t],[2,c.l],G.d,[8,null],V.a,l.NgZone],{placeholder:[0,"placeholder"],value:[1,"value"]},null),l["\u0275prd"](2048,[[8,4]],q.d,null,[s.b]),(e()(),l["\u0275eld"](49,0,null,null,1,"created-by-ref",[],null,[[null,"orgSelected"]],function(e,n,t){var l=!0;return"orgSelected"===n&&(l=!1!==e.component.orgSelected(t)&&l),l},U.b,U.a)),l["\u0275did"](50,114688,null,0,z.a,[E.n,H.a],null,{orgSelected:"orgSelected"}),(e()(),l["\u0275eld"](51,0,null,null,7,"mat-card-actions",[["class","mat-card-actions"]],[[2,"mat-card-actions-align-end",null]],null,null,null,null)),l["\u0275did"](52,16384,null,0,a.b,[],null,null),(e()(),l["\u0275eld"](53,0,null,null,2,"button",[["mat-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.onCancel(t)&&l),l},w.d,w.b)),l["\u0275did"](54,180224,null,0,i.b,[l.ElementRef,S.a,k.h,[2,R.a]],null,null),(e()(),l["\u0275ted"](-1,0,["CANCEL"])),(e()(),l["\u0275eld"](56,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""],["type","submit"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,w.d,w.b)),l["\u0275did"](57,180224,null,0,i.b,[l.ElementRef,S.a,k.h,[2,R.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(e()(),l["\u0275ted"](-1,0,["CONTINUE"]))],function(e,n){var t=n.component;e(n,6,0,t.form),e(n,22,0,""),e(n,25,0,"title"),e(n,28,0,"Title","",t.assessMeta.title),e(n,31,0,t.form.get("title").hasError("required")),e(n,44,0,"description"),e(n,47,0,"Description",t.assessMeta.description),e(n,50,0),e(n,57,0,"INVALID"===t.form.status,"primary")},function(e,n){e(n,4,0,l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending),e(n,11,1,["standard"==l["\u0275nov"](n,12).appearance,"fill"==l["\u0275nov"](n,12).appearance,"outline"==l["\u0275nov"](n,12).appearance,"legacy"==l["\u0275nov"](n,12).appearance,l["\u0275nov"](n,12)._control.errorState,l["\u0275nov"](n,12)._canLabelFloat,l["\u0275nov"](n,12)._shouldLabelFloat(),l["\u0275nov"](n,12)._hideControlPlaceholder(),l["\u0275nov"](n,12)._control.disabled,l["\u0275nov"](n,12)._control.autofilled,l["\u0275nov"](n,12)._control.focused,"accent"==l["\u0275nov"](n,12).color,"warn"==l["\u0275nov"](n,12).color,l["\u0275nov"](n,12)._shouldForward("untouched"),l["\u0275nov"](n,12)._shouldForward("touched"),l["\u0275nov"](n,12)._shouldForward("pristine"),l["\u0275nov"](n,12)._shouldForward("dirty"),l["\u0275nov"](n,12)._shouldForward("valid"),l["\u0275nov"](n,12)._shouldForward("invalid"),l["\u0275nov"](n,12)._shouldForward("pending"),!l["\u0275nov"](n,12)._animationsEnabled]),e(n,20,1,[l["\u0275nov"](n,22).required?"":null,l["\u0275nov"](n,27).ngClassUntouched,l["\u0275nov"](n,27).ngClassTouched,l["\u0275nov"](n,27).ngClassPristine,l["\u0275nov"](n,27).ngClassDirty,l["\u0275nov"](n,27).ngClassValid,l["\u0275nov"](n,27).ngClassInvalid,l["\u0275nov"](n,27).ngClassPending,l["\u0275nov"](n,28)._isServer,l["\u0275nov"](n,28).id,l["\u0275nov"](n,28).placeholder,l["\u0275nov"](n,28).disabled,l["\u0275nov"](n,28).required,l["\u0275nov"](n,28).readonly,l["\u0275nov"](n,28)._ariaDescribedby||null,l["\u0275nov"](n,28).errorState,l["\u0275nov"](n,28).required.toString()]),e(n,32,1,["standard"==l["\u0275nov"](n,33).appearance,"fill"==l["\u0275nov"](n,33).appearance,"outline"==l["\u0275nov"](n,33).appearance,"legacy"==l["\u0275nov"](n,33).appearance,l["\u0275nov"](n,33)._control.errorState,l["\u0275nov"](n,33)._canLabelFloat,l["\u0275nov"](n,33)._shouldLabelFloat(),l["\u0275nov"](n,33)._hideControlPlaceholder(),l["\u0275nov"](n,33)._control.disabled,l["\u0275nov"](n,33)._control.autofilled,l["\u0275nov"](n,33)._control.focused,"accent"==l["\u0275nov"](n,33).color,"warn"==l["\u0275nov"](n,33).color,l["\u0275nov"](n,33)._shouldForward("untouched"),l["\u0275nov"](n,33)._shouldForward("touched"),l["\u0275nov"](n,33)._shouldForward("pristine"),l["\u0275nov"](n,33)._shouldForward("dirty"),l["\u0275nov"](n,33)._shouldForward("valid"),l["\u0275nov"](n,33)._shouldForward("invalid"),l["\u0275nov"](n,33)._shouldForward("pending"),!l["\u0275nov"](n,33)._animationsEnabled]),e(n,41,1,[l["\u0275nov"](n,46).ngClassUntouched,l["\u0275nov"](n,46).ngClassTouched,l["\u0275nov"](n,46).ngClassPristine,l["\u0275nov"](n,46).ngClassDirty,l["\u0275nov"](n,46).ngClassValid,l["\u0275nov"](n,46).ngClassInvalid,l["\u0275nov"](n,46).ngClassPending,l["\u0275nov"](n,47)._isServer,l["\u0275nov"](n,47).id,l["\u0275nov"](n,47).placeholder,l["\u0275nov"](n,47).disabled,l["\u0275nov"](n,47).required,l["\u0275nov"](n,47).readonly,l["\u0275nov"](n,47)._ariaDescribedby||null,l["\u0275nov"](n,47).errorState,l["\u0275nov"](n,47).required.toString()]),e(n,51,0,"end"===l["\u0275nov"](n,52).align),e(n,53,0,l["\u0275nov"](n,54).disabled||null,"NoopAnimations"===l["\u0275nov"](n,54)._animationMode),e(n,56,0,l["\u0275nov"](n,57).disabled||null,"NoopAnimations"===l["\u0275nov"](n,57)._animationMode)})}var Z=l["\u0275ccf"]("unf-baseline-create",b,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"unf-baseline-create",[],null,null,null,J,$)),l["\u0275did"](1,114688,null,0,b,[c.g,P.j,E.n],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),X=t("c4Wm"),K=t("Nsh5"),Q=t("Q5te"),ee=t("GdAB"),ne=t("9p7y"),te=t("Au3p"),le=t("noaG"),ie=t("o3x0"),ae=t("lazE"),re=t("hCys"),oe=t("HlX0"),se=t("z3JL"),ue=t("6UMx"),ce=t("0/Q6"),de=t("21zT"),pe=t("ZmpH"),be=t("Rlre"),fe=t("La40"),me=t("qAlS"),he=t("JLTr"),ge=t("mrSG"),ve=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(ge.__extends)(n,e),n.sortByRiskDesc=function(){return function(e,n){return n.risk||0===n.risk?e.risk||0===e.risk?n.risk-e.risk:1:e.risk||0===e.risk?-1:0}},n.sortByAvgRiskDesc=function(){return function(e,n){return n.avgRisk||0===n.avgRisk?e.avgRisk||0===e.avgRisk?n.avgRisk-e.avgRisk:1:e.avgRisk||0===e.avgRisk?-1:0}},n.sortBySophisticationAsc=function(){return function(e,n){return e.x_unfetter_sophistication_level||0===e.x_unfetter_sophistication_level?n.x_unfetter_sophistication_level||0===n.x_unfetter_sophistication_level?e.x_unfetter_sophistication_level-n.x_unfetter_sophistication_level:-1:n.x_unfetter_sophistication_level||0===n.x_unfetter_sophistication_level?1:0}},n}(t("bgrY").a),ye=function(){function e(){this.blGroups=[],this.blAttackPatterns=[],this.allWeightings=500,this.numericRisk=0,this.weakness="",this.topNRisks=3,this.barColors=[{backgroundColor:he.a.MAT_COLORS.lightblue[800]},{backgroundColor:he.a.MAT_COLORS.lightblue[100]}],this.riskSub=new v.a(null),this.selectedRisk=.5}return Object.defineProperty(e.prototype,"numericRisk",{get:function(){return this.numericRiskValue},set:function(e){this.numericRiskValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weakness",{get:function(){return this.weaknessValue},set:function(e){this.weaknessValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRisks",{get:function(){return this.topRisksValue},set:function(e){this.topRisksValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryAggregation",{get:function(){return this.summaryAggregationValue},set:function(e){this.summaryAggregationValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barColors",{get:function(){return this.barColorsValue},set:function(e){this.barColorsValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedRisk",{get:function(){return this.selectedRiskValue},set:function(e){this.selectedRiskValue=e,this.recalculateDependents(),this.riskSub.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselinesGroupingTotal",{get:function(){return this.baselinesGroupingTotalValue},set:function(e){this.baselinesGroupingTotalValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselinesGroupingFiltered",{get:function(){return this.baselinesGroupingFilteredValue},set:function(e){this.baselinesGroupingFilteredValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"techniqueBreakdown",{get:function(){return this.techniqueBreakdownValue},set:function(e){this.techniqueBreakdownValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thresholdOptions",{get:function(){return this.thresholdOptionsValue},set:function(e){this.thresholdOptionsValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){return this.baselineValue},set:function(e){this.baselineValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselineGroups",{get:function(){return this.blGroups},set:function(e){this.blGroups=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselineAttackPatterns",{get:function(){return this.blAttackPatterns},set:function(e){this.blAttackPatterns=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselineCompleteAPs",{get:function(){return this.blCompleteAPs},set:function(e){this.blCompleteAPs=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselinePercentComplete",{get:function(){return this.blPercentComplete},set:function(e){this.blPercentComplete=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselineWeightings",{get:function(){return this.blWeightings},set:function(e){this.blWeightings=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalWeightings",{get:function(){return this.allWeightings},set:function(e){this.allWeightings=e},enumerable:!0,configurable:!0}),e.prototype.getSelectedRiskSub=function(){var e=this;return this.riskSub.subscribe(function(n){return e.riskSub.next(e.selectedRisk)})},e.prototype.getRiskText=function(){return Number(100*this.numericRisk).toFixed(0)},e.prototype.setAverageRiskPerAssessedObject=function(e){this.numericRisk=this.calculateAvgRiskPerAssessedObject(e)},e.prototype.calculateAvgRiskPerAssessedObject=function(e){var n=1;return e&&(e.forEach(function(e){}),e.length>0&&(n=e.length)),0/n},e.prototype.calculateAvgRiskPerPhase=function(e){var n=0;return e&&e.assessedObjects&&e.assessedObjects.length>0&&(n=this.calculateAvgRiskPerAssessedObject(e.assessedObjects)),n},e.prototype.calculateWeakness=function(e){var n="";if(e&&e.phases&&e.phases.length>0){for(var t=e.phases,l=0,i=t;l<i.length;l++){var a=i[l];a.avgRisk=this.calculateAvgRiskPerPhase(a)}var r=t.sort(ve.sortByAvgRiskDesc())[0]._id||"",o=e.attackPatternsByKillChain.find(function(e){return e._id===r});if(o&&o.attackPatterns&&o.attackPatterns.length>0){var s=o.attackPatterns.sort(ve.sortBySophisticationAsc())[0].description||"";s&&s.length>0&&(n=s)}}this.weakness=n},e.prototype.calculateTopRisks=function(e){var n,t=this,l=this.retrieveAssessmentRisks(e);l.sort(ve.sortByRiskDesc()),(n=l.slice(0,this.topNRisks)).forEach(function(e){e.objects=(e.objects||[]).sort(ve.sortByRiskDesc()),e.objects=e.objects.slice(0,t.topNRisks)}),this.topRisks=n},e.prototype.retrieveAssessmentRisks=function(e){var n=[];return e&&(e.courseOfActions&&e.courseOfActions.length>0&&(n=n.concat(e.courseOfActions)),e.indicators&&e.indicators.length>0&&(n=n.concat(e.indicators)),e.sensors&&e.sensors.length>0&&(n=n.concat(e.sensors))),n},e.prototype.recalculateDependents=function(){this.repopulateAssessmentsGrouping(),this.repopulateTechniqueBreakdown()},e.prototype.repopulateAssessmentsGrouping=function(){this.populateAssessmentsGrouping(this.baselineObjects)},e.prototype.populateAssessmentsGrouping=function(e){this.baselineObjects=e;var n=this.filterOnRisk(e),t={},l={};if(this.summaryAggregation&&this.summaryAggregation.attackPatternsByAssessedObject){var i=function(e){return function(n){var t=null;if(n&&n.attackPatterns){var l=n.attackPatterns.reduce(function(e,n){return e.concat(n.kill_chain_phases)},[]).map(function(e){return e?e.phase_name.toLowerCase():""});Array.from(new Set(l)),l.forEach(function(n){return e[n]=e[n]?e[n]+1:1}),t=n}return t}};this.summaryAggregation.attackPatternsByAssessedObject.map(i(t)).filter(function(e){return e&&e._id?n.includes(e._id):null}).map(i(l))}this.baselinesGroupingTotal=t,this.baselinesGroupingFiltered=l},e.prototype.repopulateTechniqueBreakdown=function(){this.populateTechniqueBreakdown(this.baselineObjects)},e.prototype.populateTechniqueBreakdown=function(e){if(this.techniqueBreakdown={},e&&this.summaryAggregation&&this.summaryAggregation.attackPatternsByAssessedObject&&this.summaryAggregation.assessedAttackPatternCountBySophisicationLevel){this.baselineObjects=e;var n=this.summaryAggregation.assessedAttackPatternCountBySophisicationLevel,t=this.filterOnRisk(e),l=new Set;this.summaryAggregation.attackPatternsByAssessedObject.filter(function(e){return t.includes(e._id)}).forEach(function(e){e.attackPatterns.forEach(function(e){l.add(JSON.stringify(e))})});var i={};for(var a in l.forEach(function(e){var n=JSON.parse(e);void 0===i[n.x_unfetter_sophistication_level]&&(i[n.x_unfetter_sophistication_level]=0),++i[n.x_unfetter_sophistication_level]}),Object.keys(n))this.techniqueBreakdown[a]=void 0===i[a]?0:i[a]/n[a]}},e.prototype.filterOnRisk=function(e){var n=[];return e&&(n=e.map(function(e){return e.stix.id})),n},e.prototype.sophisticationNumberToWord=function(e){var n=parseInt(e,10);return this.sophisticationValueToWord(n)},e.prototype.sophisticationValueToWord=function(e){var n="";switch(e){case 0:n="Novice";break;case 1:n="Practitioner";break;case 2:n="Expert";break;case 3:n="Innovator";break;default:n=e?e.toString():"Unknown"}return n},e.prototype.calculateThresholdOptionNames=function(e){return this.thresholdOptions=[{name:"Mitigation Threshold",risk:0},{name:"Mitigation Threshold",risk:.25},{name:"Mitigation Threshold",risk:.5},{name:"Mitigation Threshold",risk:.75},{name:"Mitigation Threshold",risk:1}],this.thresholdOptions[0]},e.prototype.isSummaryAggregationValid=function(){var e=!1;return this.summaryAggregation&&this.summaryAggregation.assessedAttackPatternCountBySophisicationLevel&&this.summaryAggregation.totalAttackPatternCountBySophisicationLevel&&(e=!0),e},e.prototype.convertLabel=function(e){var n="";return e&&(n=this.convertLabels([e])[0]),n},e.prototype.convertLabels=function(e){var n=this,t=[];return e&&(t=e.map(function(e){e||(e="");var t=e=e.replace(/-/g," ");return(e=e.replace(/\b([a-z])(\w+)/g,n.capitalizeWithExceptions))===t&&(e=e.replace(/\b([a-z])/g,n.capitalizeSingleLetter)),e})),t},e.prototype.capitalizeSingleLetter=function(e){var n="";return e&&(n=e.length>1?e:e.toUpperCase()),n},e.prototype.capitalizeWithExceptions=function(e,n,t){var l=e;return e&&"and"!==(l=e.toLowerCase())&&"or"!==l&&"the"!==l&&"of"!==l&&"on"!==l&&"but"!==l&&n&&(l=n.toUpperCase(),t&&(l+=t.toLowerCase())),l},e.prototype.renderLegend=function(){var e=this,n="Mitigation Threshold";if(this.thresholdOptions){var t=this.thresholdOptions.find(function(n){return n.risk===e.selectedRisk});t&&t.name&&(n=t.name)}return"At or Above '"+n+"'"},e.ngInjectableDef=l.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Oe=t("nZsJ"),_e=function(){function e(e,n){this.calculationService=e,this.wizardStore=n}return e.prototype.ngOnInit=function(){this.summaryLink="/baseline/result//summary/"+this.baselineId,this.percentCompleted=this.calculationService.blPercentComplete,this.percentCompleted<100&&(this.infoBarMsg=this.percentCompleted.toFixed(2)+"% of your baseline is complete.",this.editUrl="/baseline/wizard/edit/"+this.baselineId)},e.prototype.publishBaseline=function(){this.currentBaseline.metaProperties.published=!0,this.wizardStore.dispatch(new u.U(this.currentBaseline))},e}(),je=l["\u0275crt"]({encapsulation:0,styles:[[".flex[_ngcontent-%COMP%]{display:flex}.flex[_ngcontent-%COMP%]   .flex-grow[_ngcontent-%COMP%]{flex:1 1 auto}.flex-cols[_ngcontent-%COMP%]{flex-direction:column}.noUnderline[_ngcontent-%COMP%]{text-decoration:none}#tabWrapper[_ngcontent-%COMP%]{background-color:#e2f1f8;height:128px}#publishButton[_ngcontent-%COMP%]{background-color:#78909c;color:#fff;font-weight:400;margin-right:25px;margin-bottom:7px}.publishText[_ngcontent-%COMP%]{font-weight:400;margin-right:25px;margin-bottom:7px}.indent[_ngcontent-%COMP%]{margin-left:56px}.flexColumn[_ngcontent-%COMP%]{flex-direction:column}.banner-wrapper[_ngcontent-%COMP%]{background-color:#cfd8dc;color:rgba(0,0,0,.87)}"]],data:{}});function Ce(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["class","flex flexRow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"div",[["class","flex"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,1,"uf-info-bar",[["isWarningMsg","true"]],null,null,null,de.b,de.a)),l["\u0275did"](3,114688,null,0,pe.a,[T.l],{completeActionUrl:[0,"completeActionUrl"],isWarningMsg:[1,"isWarningMsg"],message:[2,"message"]},null)],function(e,n){var t=n.component;e(n,3,0,t.editUrl||"","true",l["\u0275inlineInterpolate"](1,"",t.infoBarMsg,""))},null)}function Ae(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","publishText"]],null,null,null,null,null)),(e()(),l["\u0275ted"](1,null,[" Published \u2022 "," "])),l["\u0275ppd"](2,2)],null,function(e,n){var t=n.component;e(n,1,0,l["\u0275unv"](n,1,0,e(n,2,0,l["\u0275nov"](n.parent,0),t.published,"medium")))})}function we(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"div",[["id","publishWrapper"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,2,"button",[["id","publishButton"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.publishBaseline()&&l),l},w.d,w.b)),l["\u0275did"](2,180224,null,0,i.b,[l.ElementRef,S.a,k.h,[2,R.a]],null,null),(e()(),l["\u0275ted"](-1,0,["PUBLISH"]))],null,function(e,n){e(n,1,0,l["\u0275nov"](n,2).disabled||null,"NoopAnimations"===l["\u0275nov"](n,2)._animationMode)})}function Se(e){return l["\u0275vid"](0,[l["\u0275pid"](0,P.e,[l.LOCALE_ID]),(e()(),l["\u0275eld"](1,0,null,null,18,"div",[["class","flex flexColumn"],["id","tabWrapper"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ce)),l["\u0275did"](3,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](4,0,null,null,0,"div",[["class","flex1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,14,"div",[["class","flex flexRow"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,0,null,null,9,"nav",[["class","indent uf-tabs-borderless mat-tab-nav-bar"],["mat-tab-nav-bar",""]],null,null,null,be.e,be.c)),l["\u0275did"](7,3325952,null,1,fe.i,[l.ElementRef,[2,W.b],l.NgZone,l.ChangeDetectorRef,me.e],null,null),l["\u0275qud"](603979776,1,{_tabLinks:1}),(e()(),l["\u0275eld"](9,0,null,0,6,"a",[["class","noUnderline mat-tab-link"],["mat-tab-link",""],["routerLinkActive",""]],[[1,"target",0],[8,"href",4],[1,"aria-current",0],[1,"aria-disabled",0],[1,"tabIndex",0],[2,"mat-tab-disabled",null],[2,"mat-tab-label-active",null]],[[null,"click"]],function(e,n,t){var i=!0;return"click"===n&&(i=!1!==l["\u0275nov"](e,10).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),"click"===n&&(i=!1!==l["\u0275nov"](e,14)._handleClick(t)&&i),i},null,null)),l["\u0275did"](10,671744,[[3,4]],0,T.o,[T.l,T.a,P.k],{routerLink:[0,"routerLink"]},null),l["\u0275did"](11,1720320,[["summary",4]],2,T.n,[T.l,l.ElementRef,l.Renderer2,l.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),l["\u0275qud"](603979776,2,{links:1}),l["\u0275qud"](603979776,3,{linksWithHrefs:1}),l["\u0275did"](14,147456,[[1,4]],0,fe.h,[fe.i,l.ElementRef,l.NgZone,S.a,[2,G.m],[8,null],k.h],{active:[0,"active"]},null),(e()(),l["\u0275ted"](-1,null,["SUMMARY"])),(e()(),l["\u0275eld"](16,0,null,null,0,"div",[["class","flex1"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ae)),l["\u0275did"](18,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["\u0275and"](0,[["notPublished",2]],null,0,null,we))],function(e,n){var t=n.component;e(n,3,0,t.percentCompleted<100),e(n,10,0,t.summaryLink),e(n,11,0,""),e(n,14,0,l["\u0275nov"](n,11).isActive),e(n,18,0,t.published,l["\u0275nov"](n,19))},function(e,n){e(n,9,0,l["\u0275nov"](n,10).target,l["\u0275nov"](n,10).href,l["\u0275nov"](n,14).active,l["\u0275nov"](n,14).disabled.toString(),l["\u0275nov"](n,14).tabIndex,l["\u0275nov"](n,14).disabled,l["\u0275nov"](n,14).active)})}var ke=t("7M3A"),Re=t("FJDs"),xe=t("dzgT"),Pe=t("FelZ"),Te=function(){function e(e,n){this.appStore=e,this.changeDetectorRef=n,this.capabilities=[],this.selectedAttackPatternIds=[],this.attackPatterns=[],this.heatmapOptions={view:{component:"#baseline-heat-map"},color:{batchColors:[{header:{bg:"transparent",fg:"#333"},body:{bg:"transparent",fg:"black"}}],heatColors:{true:{bg:"#b2ebf2",fg:"black"},false:{bg:"#ccc",fg:"black"},selected:{bg:"#33a0b0",fg:"black"}}},text:{cells:{showText:!0}},zoom:{cellTitleExtent:2}},this.treemapOptions={minColor:"#c8e0ec",midColor:"#a8c0cc",maxColor:"#88a0ac"},this.carouselOptions={}}return e.prototype.ngOnInit=function(){var e=this,n=Object(xe.a)(this.appStore.select(Pe.e),this.appStore.select(Pe.a)).pipe(Object(h.a)(function(e){var n=e[0],t=e[1];return t&&t.length>0&&void 0!==n&&Object.keys(n).length>0}),Object(g.a)(function(n){var t=n[0],l=e.attackPatternIdsToTactics(e.selectedAttackPatternIds,n[1]);return l=e.deriveAttackPatternFramework(l,t),e.enhanceWithHeatMapOptions(l)})).subscribe(function(n){e.attackPatterns=n,e.changeDetectorRef.markForCheck()},function(e){return console.log(e)},function(){n&&n.unsubscribe()})},e.prototype.attackPatternIdsToTactics=function(e,n){var t=new Set(e);return n.filter(function(e){return t.has(e.id)})},e.prototype.deriveAttackPatternFramework=function(e,n){var t=Object.keys(n).filter(function(t){return n[t].phases.find(function(n){var t=n.id;return void 0!==e.find(function(e){return void 0!==e.phases.find(function(e){return e===t})})})}),l=n[t[0]].id;return e.map(function(e){return e.framework=l,e})},e.prototype.enhanceWithHeatMapOptions=function(e){return e.map(function(e){return e.adds={highlights:[{value:2,color:{style:"selected",bg:"#33a0b0",fg:"white"}}]},e})},e}(),Ee=l["\u0275crt"]({encapsulation:0,styles:[["#baseline-heat-map[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}[_nghost-%COMP%]    {background-color:#fff}[_nghost-%COMP%]     .mat-card{margin:4px 20px 15px}[_nghost-%COMP%]     .mat-card-header-text{width:100%}[_nghost-%COMP%]     .mat-card-header-text .mat-card-title{display:flex;align-items:center}[_nghost-%COMP%]     tactics-pane .tactics-title{color:rgba(255,255,255,.87)}[_nghost-%COMP%]     tactics-carousel-control .carousel-button.disabled{color:rgba(0,0,0,.33)}[_nghost-%COMP%]     unf-heatmap div.heat-map{background:#fff}[_nghost-%COMP%]     unf-heatmap div.heat-map rect.selected{fill:#78909c}"]],data:{}});function Me(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"tactics-pane",[],null,null,null,ke.b,ke.a)),l["\u0275did"](2,245760,[["tactics",4]],0,Re.a,[E.n],{targets:[0,"targets"],title:[1,"title"],subtitle:[2,"subtitle"],heatmapOptions:[3,"heatmapOptions"],treemapOptions:[4,"treemapOptions"],carouselOptions:[5,"carouselOptions"]},null)],function(e,n){var t=n.component;e(n,2,0,t.attackPatterns,"Addressed Techniques","These are the techniques addressed by the capabilities in this baseline.",t.heatmapOptions,t.treemapOptions,t.carouselOptions)},null)}function Be(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","uf-well"],["id","baseline-heat-map"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Me)),l["\u0275did"](2,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,!n.component.collapseContents)},null)}var Ie=t("v9Dh"),Le=t("eDkP"),De=t("xdbM"),qe=function(){function e(e){this.summaryCalculationService=e,this.overallRatingChartType=this.CHART_TYPE,this.CHART_TYPE="doughnut",this.DEFAULT_CHART_COLORS=[{}],this.CHART_LABELS=["Attack Patterns Unweighted","Attack Patterns Weighted"],this.CHART_BG_COLORS=[he.a.COLORS.red,he.a.COLORS.green],this.CHART_HOVER_BG_COLORS=[he.a.COLORS.darkRed,he.a.COLORS.darkGreen],this.CHART_OPTIONS={legend:{display:!0,position:"bottom"},responsive:!0,maintainAspectRatio:!1,tooltips:{callbacks:{label:function(e,n){var t=n.datasets[e.datasetIndex].data,l=n.labels[e.index],i=t[e.index],a=0;return t.forEach(function(e){a+=e}),l+": "+Math.round(i/a*100)+"%"}}}}}return e.prototype.ngOnInit=function(){var e=this.summaryCalculationService.blCompleteAPs;this.overallRatingChartData=[{data:[1-e,e],backgroundColor:this.CHART_BG_COLORS,hoverBackgroundColor:this.CHART_HOVER_BG_COLORS}],this.overallRatingChartType=this.CHART_TYPE,this.activeMainWell="heatmap",this.collapseTechniques=!0},e.prototype.setMainWell=function(e){this.activeMainWell=this.activeMainWell===e?"none":e},e.prototype.calculateRisk=function(e){var n=0;return e&&(n=this.summaryCalculationService.calculateAvgRiskPerAssessedObject(e)),this.formatRisk(n)},e.prototype.formatRisk=function(e){var n="0.00";return e&&(n=Number(100*e).toFixed(2)),"Infinity"===n&&(n="100.00"),n},e}(),Fe=l["\u0275crt"]({encapsulation:0,styles:[["#report[_ngcontent-%COMP%]{margin-left:27px;margin-right:27px}.matchHeight[_ngcontent-%COMP%]{align-items:stretch;box-align:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch}#baselineCard[_ngcontent-%COMP%]{min-width:916px}.external-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:300;padding-top:33px;padding-bottom:15px}.triple-card-width[_ngcontent-%COMP%]{width:100%;min-width:916px}#chart-container[_ngcontent-%COMP%]{padding:0}.card[_ngcontent-%COMP%]{min-height:357px;margin-bottom:20px;font-weight:lighter;padding:19px 18px 6px 23px}.card[_ngcontent-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{color:#000;font-size:20px;font-weight:600;margin-bottom:6px}.card-width[_ngcontent-%COMP%]{width:33%;min-width:292px}.left-card[_ngcontent-%COMP%]{flex-grow:.5;margin-right:10px}.right-card[_ngcontent-%COMP%]{flex-grow:.5;margin-left:10px}#stats[_ngcontent-%COMP%]{background-color:#78909c;color:rgba(255,255,255,.87);opacity:.87}#overall-rating[_ngcontent-%COMP%]{padding:29px 37px}#overall-rating-chart[_ngcontent-%COMP%]{height:357px}#ratings[_ngcontent-%COMP%]{color:#78909c}.card-row-description[_ngcontent-%COMP%]{font-size:15px}.card-row-data[_ngcontent-%COMP%]{font-size:50px;font-weight:300}.second-row[_ngcontent-%COMP%]{padding-top:25px}.third-row[_ngcontent-%COMP%]{padding-top:27px}"]],data:{}});function Ne(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","uf-mat-card card triple-card-width"],["id","chart-container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,1,"summary-tactics",[["collapseSubject","false"]],null,null,null,Be,Ee)),l["\u0275did"](2,114688,null,0,Te,[E.n,l.ChangeDetectorRef],{selectedAttackPatternIds:[0,"selectedAttackPatternIds"]},null)],function(e,n){e(n,2,0,n.component.summaryCalculationService.blAttackPatterns)},null)}function Ge(e){return l["\u0275vid"](0,[l["\u0275pid"](0,P.f,[l.LOCALE_ID]),(e()(),l["\u0275eld"](1,0,null,null,66,"div",[["id","report"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,65,"div",[["class","container-fluid"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](4,0,null,null,8,"div",[["class","flex matchHeight"]],null,null,null,null,null)),(e()(),l["\u0275eld"](5,0,null,null,7,"div",[["class","triple-card-width external-card-title"]],null,null,null,null,null)),(e()(),l["\u0275eld"](6,16777216,null,null,6,"button",[["mat-icon-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(e,n,t){var i=!0,a=e.component;return"longpress"===n&&(i=!1!==l["\u0275nov"](e,8).show()&&i),"keydown"===n&&(i=!1!==l["\u0275nov"](e,8)._handleKeydown(t)&&i),"touchend"===n&&(i=!1!==l["\u0275nov"](e,8)._handleTouchend()&&i),"click"===n&&(i=!1!==a.setMainWell("heatmap")&&i),i},w.d,w.b)),l["\u0275did"](7,180224,null,0,i.b,[l.ElementRef,S.a,k.h,[2,R.a]],null,null),l["\u0275did"](8,147456,null,0,Ie.d,[Le.c,l.ElementRef,me.c,l.ViewContainerRef,l.NgZone,S.a,k.c,k.h,Ie.b,[2,W.b],[2,Ie.a]],{message:[0,"message"]},null),(e()(),l["\u0275eld"](9,0,null,0,3,"i",[["class","material-icons mat-24"]],null,null,null,null,null)),l["\u0275did"](10,278528,null,0,P.m,[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](11,{labelColor:0}),(e()(),l["\u0275ted"](-1,null,["view_comfy"])),(e()(),l["\u0275eld"](13,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](14,0,null,null,2,"div",[["class","flex matchHeight"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,Ne)),l["\u0275did"](16,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](17,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](18,0,null,null,6,"div",[["class","flex matchHeight"]],null,null,null,null,null)),(e()(),l["\u0275eld"](19,0,null,null,1,"span",[["class","card-width external-card-title left-card"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" What are your baseline stats?"])),(e()(),l["\u0275eld"](21,0,null,null,1,"span",[["class","card-width external-card-title left-card right-card"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" What is your overall baseline weighting status?"])),(e()(),l["\u0275eld"](23,0,null,null,1,"span",[["class","card-width external-card-title right-card"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" What are your baseline weightings?"])),(e()(),l["\u0275eld"](25,0,null,null,42,"div",[["class","row"]],null,null,null,null,null)),(e()(),l["\u0275eld"](26,0,null,null,41,"div",[["class","flex matchHeight"]],null,null,null,null,null)),(e()(),l["\u0275eld"](27,0,null,null,15,"mat-card",[["class","uf-mat-card card card-width left-card mat-card"],["color","primary"],["id","stats"]],null,null,null,F.d,F.a)),l["\u0275did"](28,49152,null,0,a.a,[],null,null),(e()(),l["\u0275eld"](29,0,null,0,13,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),l["\u0275did"](30,16384,null,0,a.d,[],null,null),(e()(),l["\u0275eld"](31,0,null,null,1,"div",[["class","card-row-description"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" Groups "])),(e()(),l["\u0275eld"](33,0,null,null,1,"div",[["class","card-row-data"]],null,null,null,null,null)),(e()(),l["\u0275ted"](34,null,[" "," "])),(e()(),l["\u0275eld"](35,0,null,null,1,"div",[["class","card-row-description second-row"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" Capabilities "])),(e()(),l["\u0275eld"](37,0,null,null,1,"div",[["class","card-row-data"]],null,null,null,null,null)),(e()(),l["\u0275ted"](38,null,[" "," "])),(e()(),l["\u0275eld"](39,0,null,null,1,"div",[["class","card-row-description third-row"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" Attack Patterns "])),(e()(),l["\u0275eld"](41,0,null,null,1,"div",[["class","card-row-data"]],null,null,null,null,null)),(e()(),l["\u0275ted"](42,null,[" "," of "," "])),(e()(),l["\u0275eld"](43,0,null,null,5,"mat-card",[["class","uf-mat-card card card-width left-card right-card mat-card"],["color","primary"],["id","overall-rating"]],null,null,null,F.d,F.a)),l["\u0275did"](44,49152,null,0,a.a,[],null,null),(e()(),l["\u0275eld"](45,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),l["\u0275did"](46,16384,null,0,a.d,[],null,null),(e()(),l["\u0275eld"](47,0,null,null,1,"canvas",[["baseChart",""],["id","overall-rating-chart"]],null,null,null,null,null)),l["\u0275did"](48,737280,null,0,De.BaseChartDirective,[l.ElementRef],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"]},null),(e()(),l["\u0275eld"](49,0,null,null,18,"mat-card",[["class","uf-mat-card card card-width right-card mat-card"],["color","primary"],["id","ratings"]],null,null,null,F.d,F.a)),l["\u0275did"](50,49152,null,0,a.a,[],null,null),(e()(),l["\u0275eld"](51,0,null,0,16,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),l["\u0275did"](52,16384,null,0,a.d,[],null,null),(e()(),l["\u0275eld"](53,0,null,null,1,"div",[["class","card-row-description"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" Protect "])),(e()(),l["\u0275eld"](55,0,null,null,2,"div",[["class","card-row-data"]],null,null,null,null,null)),(e()(),l["\u0275ted"](56,null,[" "," "])),l["\u0275ppd"](57,2),(e()(),l["\u0275eld"](58,0,null,null,1,"div",[["class","card-row-description second-row"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" Detect "])),(e()(),l["\u0275eld"](60,0,null,null,2,"div",[["class","card-row-data"]],null,null,null,null,null)),(e()(),l["\u0275ted"](61,null,[" "," "])),l["\u0275ppd"](62,2),(e()(),l["\u0275eld"](63,0,null,null,1,"div",[["class","card-row-description third-row"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,[" Respond "])),(e()(),l["\u0275eld"](65,0,null,null,2,"div",[["class","card-row-data"]],null,null,null,null,null)),(e()(),l["\u0275ted"](66,null,[" "," "])),l["\u0275ppd"](67,2)],function(e,n){var t=n.component;e(n,8,0,l["\u0275inlineInterpolate"](1,"","heatmap"===t.activeMainWell?"Hide":"Show"," Heat Map")),e(n,10,0,"material-icons mat-24",e(n,11,0,"heatmap"!==t.activeMainWell)),e(n,16,0,"heatmap"===t.activeMainWell),e(n,48,0,t.overallRatingChartData,t.CHART_LABELS,t.CHART_OPTIONS,t.CHART_TYPE,t.DEFAULT_CHART_COLORS)},function(e,n){var t=n.component;e(n,6,0,l["\u0275nov"](n,7).disabled||null,"NoopAnimations"===l["\u0275nov"](n,7)._animationMode),e(n,34,0,t.summaryCalculationService.blGroups.length),e(n,38,0,t.summaryCalculationService.baseline.assessments.length),e(n,42,0,t.summaryCalculationService.blAttackPatterns.length,t.summaryCalculationService.totalWeightings),e(n,56,0,l["\u0275unv"](n,56,0,e(n,57,0,l["\u0275nov"](n,0),t.summaryCalculationService.baselineWeightings.protPct,"1.2-2"))),e(n,61,0,l["\u0275unv"](n,61,0,e(n,62,0,l["\u0275nov"](n,0),t.summaryCalculationService.baselineWeightings.detPct,"1.2-2"))),e(n,66,0,l["\u0275unv"](n,66,0,e(n,67,0,l["\u0275nov"](n,0),t.summaryCalculationService.baselineWeightings.respPct,"1.2-2")))})}var We=t("CRUc"),Ve=t("hioa"),Ue=t("DmxA"),ze=t("93dM"),He=t("k2Co"),$e=t("F/XL"),Ye=t("t9fZ"),Je=t("2WpN"),Ze=t("RxPr"),Xe=t("tVj7"),Ke=t("bdC7"),Qe="[Baseline Summary] LOAD_BASELINE_DATA",en="[Baseline Summary] SET_BASELINES",nn="[Baseline Summary] SET_BASELINE",tn="[Baseline Summary] SET_ATTACK_PATTERNS",ln="[Baseline Summary] SET_BASELINE_WEIGHTINGS",an="[Baseline Summary] SET_AND_READ_CAPABILITIES",rn="[Baseline Summary] SET_BASELINE_GROUPS",on="[Baseline Summary] FINISHED_LOADING",sn="[Baseline Summary] SET_SUMMARY_AGGREGATION_DATA",un="[Baseline Summary] FINISHED_LOADING_SUMMARY_AGGREGATION_DATA",cn="[Baseline Result Group] CLEAN_BASELINE_RESULT_DATA",dn=function(){return function(e){this.payload=e,this.type=Qe}}(),pn=function(){return function(e){this.payload=e,this.type=en}}(),bn=function(){return function(e){this.payload=e,this.type=nn}}(),fn=function(){return function(e){this.payload=e,this.type=tn}}(),mn=function(){return function(e){this.payload=e,this.type=ln}}(),hn=function(){return function(e){this.payload=e,this.type=an}}(),gn=function(){return function(e){this.payload=e,this.type=rn}}(),vn=function(){return function(e){this.payload=e,this.type=on}}(),yn=function(){return function(){this.type=cn}}(),On=t("YlbQ"),_n=t("p0ib"),jn=t("15JJ"),Cn=t("AytR"),An=function(e){function n(n,t){var l=e.call(this)||this;return l.baselineService=n,l.creatorId=t,l.demoMode="DEMO"===Cn.a.runMode,l.filterChange=new v.a(""),l.dataChange=new v.a(void 0),l}return Object(ge.__extends)(n,e),n.prototype.connect=function(e){var n=this;return _n.a.apply(void 0,[this.filterChange,this.dataChange]).pipe(Object(jn.a)(function(){var e=n.filterChange.getValue().trim().toLowerCase()||"",t=n.baselineService.getLatestAssessments();return e&&0!==e.length?t.pipe(Object(g.a)(function(n){return n.filter(function(n){return n.name.trim().toLowerCase().includes(e)})})):t}))},n.prototype.disconnect=function(e){console.log("disconnect from datasource")},n.prototype.nextFilter=function(e){e=(e=e||"").trim(),this.filterChange.next(e)},n.prototype.nextDataChange=function(e){this.dataChange.next(void 0)},n}(On.a),wn=t("k+c2"),Sn=(Object(E.B)("stix"),Object(E.D)(wn.b,Pe.e,function(e,n){var t=0;return n[e].phases.map(function(e){return t+=e.tactics.length}),t})),kn=function(){function e(e,n,t,l,i,a,r,o){var s=this;this.route=e,this.router=n,this.dialog=t,this.store=l,this.userStore=i,this.baselineService=a,this.usersService=r,this.calculationService=o,this.baseAssessUrl="/baseline",this.finishedLoading=!1,this.masterListOptions={dataSource:null,columns:new le.b("modified","Date Modified").addColumn("id","# of Capabilities","master-list-capabilities",!1,function(e){return e&&s.baselines?s.baselines.filter(function(n){return n.id===e})[0].assessments.length.toString():"0"}).addColumn("created_by_ref","Organization","master-list-organization",!1,function(e){var n=null;return e&&(n=s.identities.find(function(n){return n.id===e})),n?n.name:"Unknown"}).addColumn("published","Status","master-list-extra",!1,function(e){return e?"Published":"Not Published"}),displayRoute:this.baseAssessUrl+"/result/summary",modifyRoute:this.baseAssessUrl+"/wizard/edit",createRoute:this.baseAssessUrl+"/create"},this.subscriptions=[]}return e.prototype.getDialog=function(){return this.dialog},e.prototype.ngOnInit=function(){var e=this,n=this.userStore.select(Sn).pipe(Object(m.a)()).subscribe(function(n){return e.attackPatternCount=n}),t=this.route.params.pipe(Object(m.a)()).subscribe(function(n){e.baselineId=n.baselineId||"",e.baselines=void 0,e.finishedLoading=!1,e.calculationService.baseline=void 0,e.store.dispatch(new yn);var t=e.userStore.select("users").pipe(Object(f.a)("userProfile"),Object(Ye.a)(1)).subscribe(function(n){e.requestBaseline(e.baselineId,n.organizations[0].id)},function(e){return console.log(e)});e.subscriptions.push(t)},function(e){return console.log(e)}),l=this.userStore.select("stix").pipe(Object(f.a)("identities"),Object(Je.a)(function(){return l&&l.unsubscribe()})).subscribe(function(n){return e.identities=n},function(e){return console.log("("+(new Date).toISOString()+") error retrieving identities from app store",e)});this.getBaseline(),this.listenForDataChanges(),this.subscriptions.push(n,t),this.dates=["Yesterday, 09:36:40 AM","Monday, 03:11:15 PM","Mar 15, 2018 01:14:55 PM"]},e.prototype.requestBaseline=function(e,n){var t=this,l=function(e){return e&&e.id===t.baselineId};this.masterListOptions.dataSource=new An(this.baselineService,n),this.masterListOptions.columns.id.classes=function(e){return l(e)?"current-item":"cursor-pointer"},this.masterListOptions.columns.id.selectable=function(e){return!l(e)},this.store.dispatch(new dn(e))},e.prototype.getBaseline=function(){var e=this,n=this.store.select("baselineSummary").pipe(Object(f.a)("baselines"),Object(m.a)(),Object(h.a)(function(e){return e&&e.length>0})).subscribe(function(n){return e.baselines=n.slice()},function(e){return console.log(e)}),t=this.store.select("baselineSummary").pipe(Object(f.a)("baseline"),Object(m.a)()).subscribe(function(n){return e.currentBaseline=n},function(e){return console.log(e)}),l=this.store.select("baselineSummary").pipe(Object(f.a)("blAttackPatterns"),Object(m.a)(),Object(h.a)(function(e){return e&&e.length>=0})).subscribe(function(n){return e.blAttackPatterns=n},function(e){return console.log(e)}),i=this.store.select("baselineSummary").pipe(Object(f.a)("blCompleteAPs"),Object(m.a)()).subscribe(function(n){return e.blCompleteAPs=n},function(e){return console.log(e)}),a=this.store.select("baselineSummary").pipe(Object(f.a)("blCompleteWeightings"),Object(m.a)()).subscribe(function(n){return e.blCompleteWeightings=n},function(e){return console.log(e)}),r=this.store.select("baselineSummary").pipe(Object(f.a)("blGroups"),Object(m.a)(),Object(h.a)(function(e){return e&&e.length>=0})).subscribe(function(n){return e.blGroups=n},function(e){return console.log(e)}),o=this.store.select("baselineSummary").pipe(Object(f.a)("blWeightings"),Object(m.a)()).subscribe(function(n){return e.blWeightings=n},function(e){return console.log(e)});this.subscriptions.push(n,t,l,i,a,r,o)},e.prototype.listenForDataChanges=function(){var e=this,n=this.store.select("baselineSummary").pipe(Object(f.a)("summaries"),Object(m.a)(),Object(h.a)(function(e){return e&&e.length>0})).subscribe(function(n){e.baselines=n.slice()},function(e){return console.log(e)}),t=this.store.select("baselineSummary").pipe(Object(f.a)("finishedLoading"),Object(m.a)(),Object(h.a)(function(e){return!0===e})).subscribe(function(n){void 0!==e.blGroups?(e.finishedLoading=n,e.transformSummary()):e.setLoadingToDone()},function(e){return console.log(e)}),l=this.store.select("baselineSummary").pipe(Object(f.a)("baseline"),Object(m.a)()).subscribe(function(n){n&&(e.currentBaseline=n,e.baselineName=Object($e.a)(e.currentBaseline.name))},function(e){return console.log(e)});this.subscriptions.push(n,t,l)},e.prototype.ngOnDestroy=function(){this.subscriptions.filter(function(e){return void 0!==e}).forEach(function(e){return e.unsubscribe()}),this.store.dispatch(new yn)},e.prototype.onCreate=function(e){return this.router.navigateByUrl(this.masterListOptions.createRoute)},e.prototype.onEdit=function(e){var n;return(n=!e||e instanceof UIEvent?this.router.navigate([this.masterListOptions.modifyRoute,this.baselineId]):this.router.navigate([this.masterListOptions.modifyRoute,e.id])).catch(function(e){return console.log(e)}),n},e.prototype.onShare=function(e){return console.log("noop"),Promise.resolve(!1)},e.prototype.onDeleteCurrent=function(){this.confirmDelete({name:this.currentBaseline.name,id:this.baselineId})},e.prototype.onDelete=function(e){this.confirmDelete({name:e.name,id:e.id})},e.prototype.confirmDelete=function(e){var n=this;if(e&&e.id)var t=this.dialog.open(Ze.a,{data:{attributes:e}}).afterClosed().subscribe(function(t){if(!(!t||"boolean"==typeof t&&!0!==t||"string"==typeof t&&"true"!==t))var l=e.id===n.baselineId,i=n.baselineService.delete(e).subscribe(function(e){return n.masterListOptions.dataSource.nextDataChange(e)},function(e){return console.log(e)},function(){if(i&&i.unsubscribe(),l)return n.router.navigate([he.a.X_UNFETTER_BASELINE_NAVIGATE_URL])})},function(e){return console.log(e)},function(){return t.unsubscribe()});else console.log("confirm delete requires an id")},e.prototype.onCellSelected=function(e){if(e&&e.id)return this.store.dispatch(new yn),this.router.navigate([this.masterListOptions.displayRoute,e.id])},e.prototype.onFilterTabChanged=function(e){return console.log("noop"),Promise.resolve(!1)},e.prototype.trackByFn=function(e,n){var t=e;return n&&(n.id||0===n.id)&&(t=n.id||e),t},e.prototype.setLoadingToDone=function(){this.finishedLoading=!0},e.prototype.transformSummary=function(){this.calculationService.baseline=this.currentBaseline,this.calculationService.blAttackPatterns=this.blAttackPatterns,this.calculationService.blCompleteAPs=this.blCompleteAPs/(this.currentBaseline.assessments.length*this.attackPatternCount),this.calculationService.blPercentComplete=this.blCompleteWeightings/(3*this.currentBaseline.assessments.length*this.attackPatternCount)/100*100*100,this.calculationService.totalWeightings=this.attackPatternCount,this.calculationService.blGroups=this.blGroups,this.calculationService.blWeightings=this.blWeightings},e}(),Rn=l["\u0275crt"]({encapsulation:0,styles:[[".side-panel[_ngcontent-%COMP%]{width:320px;background-color:#fff}.side-panel[_ngcontent-%COMP%]   markings-chips[_ngcontent-%COMP%]     div.flex{margin-bottom:4px}.side-panel[_ngcontent-%COMP%]   markings-chips[_ngcontent-%COMP%]     div.flex mat-chip-list{margin:0 auto}.side-panel[_ngcontent-%COMP%]   markings-chips[_ngcontent-%COMP%]     div.flex mat-chip{margin:0 auto 4px}.side-panel[_ngcontent-%COMP%]   markings-chips[_ngcontent-%COMP%]     div.flex mat-chip:first-of-type{margin-top:-8px}.main-panel[_ngcontent-%COMP%]{min-height:calc(100vh - 64px);background-color:#f1f1f1}  #sideDateList .side-list-item{font-size:14px;font-weight:lighter;color:#78909c}  #sideDateList .mat-list-item{height:32px}  #sideDateList .mat-expansion-panel-header-title{font-size:16px}  #sideDateList .mat-expansion-panel-header{padding-left:0}  #sideDateList .mat-expansion-panel-content.mat-expanded{margin-top:-23px}  .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .master-list-item,   .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .master-list-item-header{flex:3!important}  .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .master-list-capabilities,   .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .master-list-capabilities-header{flex:1;align-items:center;text-align:center}  .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .master-list-organization,   .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .mat-column-created_by_ref{flex:2;align-items:center}  .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .master-list-extra,   .uf-master-list-dialog .mat-dialog-container mat-dialog-content div.master-list-table .master-list-extra-header{flex:1;align-items:center}  .uf-master-list-dialog .mat-dialog-container mat-dialog-actions{justify-content:flex-end;padding:6px 6px 6px 0}"]],data:{animation:[{type:7,name:"slideInOutAnimation",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateX(-400%)"},offset:null},{type:4,styles:{type:6,styles:{transform:"translateX(0)",position:"relative"},offset:null},timings:".5s ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:4,styles:{type:6,styles:{transform:"translateX(-400%)"},offset:null},timings:".5s ease-in-out"}],options:null}],options:{}}]}});function xn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,49,"mat-sidenav-container",[["class","mat-drawer-container mat-sidenav-container"]],[[2,"mat-drawer-container-explicit-backdrop",null]],null,null,X.d,X.b)),l["\u0275did"](1,1490944,null,2,K.f,[[2,W.b],l.ElementRef,l.NgZone,l.ChangeDetectorRef,K.a,[2,R.a]],null,null),l["\u0275qud"](603979776,1,{_drawers:1}),l["\u0275qud"](335544320,2,{_content:0}),(e()(),l["\u0275eld"](4,0,null,0,38,"mat-sidenav",[["class","side-panel mat-drawer mat-sidenav"],["mode","side"],["opened","true"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[["component","@transform.start"],["component","@transform.done"]],function(e,n,t){var i=!0;return"component:@transform.start"===n&&(i=!1!==l["\u0275nov"](e,5)._onAnimationStart(t)&&i),"component:@transform.done"===n&&(i=!1!==l["\u0275nov"](e,5)._onAnimationEnd(t)&&i),i},X.f,X.a)),l["\u0275did"](5,3325952,[[1,4]],0,K.e,[l.ElementRef,k.i,k.h,S.a,l.NgZone,[2,P.d]],{mode:[0,"mode"],opened:[1,"opened"]},null),(e()(),l["\u0275eld"](6,0,null,0,36,"unfetter-side-panel",[["class","side-panel"],["collapsible","false"],["width","320"]],null,null,null,Q.b,Q.a)),l["\u0275did"](7,114688,null,0,ee.a,[],{width:[0,"width"],item:[1,"item"]},null),l["\u0275pid"](131072,P.b,[l.ChangeDetectorRef]),l["\u0275ppd"](9,1),l["\u0275pod"](10,{name:0}),(e()(),l["\u0275eld"](11,0,null,1,1,"sidepanel-option-item",[["icon","mode_edit"],["label","Edit"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.onEdit(t)&&l),l},ne.b,ne.a)),l["\u0275did"](12,114688,null,0,te.a,[],{label:[0,"label"],icon:[1,"icon"]},null),(e()(),l["\u0275eld"](13,0,null,1,1,"sidepanel-option-item",[["disabled","true"],["icon","share"],["label","Share"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.onShare(t)&&l),l},ne.b,ne.a)),l["\u0275did"](14,114688,null,0,te.a,[],{label:[0,"label"],icon:[1,"icon"],disabled:[2,"disabled"]},null),(e()(),l["\u0275eld"](15,0,null,1,1,"sidepanel-option-item",[["icon","delete"],["label","Delete"]],null,[[null,"click"]],function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.onDeleteCurrent(t)&&l),l},ne.b,ne.a)),l["\u0275did"](16,114688,null,0,te.a,[],{label:[0,"label"],icon:[1,"icon"]},null),(e()(),l["\u0275eld"](17,0,null,2,1,"master-list-dialog-trigger",[["height","400px"],["title","Baselines"],["width","1200px"]],null,[[null,"tabChange"],[null,"create"],[null,"select"],[null,"edit"],[null,"delete"]],function(e,n,t){var l=!0,i=e.component;return"tabChange"===n&&(l=!1!==i.onFilterTabChanged(t)&&l),"create"===n&&(l=!1!==i.onCreate(t)&&l),"select"===n&&(l=!1!==i.onCellSelected(t)&&l),"edit"===n&&(l=!1!==i.onEdit(t)&&l),"delete"===n&&(l=!1!==i.onDelete(t)&&l),l},A.c,A.b)),l["\u0275did"](18,180224,null,0,le.c,[ie.e],{title:[0,"title"],width:[1,"width"],height:[2,"height"],dataSource:[3,"dataSource"],columns:[4,"columns"]},{tabChange:"tabChange",create:"create",select:"select",edit:"edit",delete:"delete"}),(e()(),l["\u0275eld"](19,0,null,3,1,"markings-chips",[],null,null,null,ae.b,ae.a)),l["\u0275did"](20,638976,null,0,re.a,[E.n,l.ChangeDetectorRef],{model:[0,"model"]},null),(e()(),l["\u0275eld"](21,0,null,4,10,"sidepanel-list-item",[["expanded","true"],["hideToggle","true"],["id","sideDateList"],["label","Date Last Modified"],["showCount","false"]],null,null,null,oe.b,oe.a)),l["\u0275did"](22,114688,null,0,se.a,[],{label:[0,"label"],items:[1,"items"],showCount:[2,"showCount"],expanded:[3,"expanded"],hideToggle:[4,"hideToggle"]},null),(e()(),l["\u0275eld"](23,0,null,0,8,"mat-list-item",[["class","list-divider mat-list-item"]],[[24,"@slideInOutAnimation",0],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],[[null,"focus"],[null,"blur"]],function(e,n,t){var i=!0;return"focus"===n&&(i=!1!==l["\u0275nov"](e,24)._handleFocus()&&i),"blur"===n&&(i=!1!==l["\u0275nov"](e,24)._handleBlur()&&i),i},ue.e,ue.b)),l["\u0275did"](24,1097728,null,3,ce.c,[l.ElementRef,[2,ce.f]],null,null),l["\u0275qud"](603979776,3,{_lines:1}),l["\u0275qud"](335544320,4,{_avatar:0}),l["\u0275qud"](335544320,5,{_icon:0}),(e()(),l["\u0275eld"](28,0,null,1,3,"h4",[["class","side-list-item mat-line"],["mat-line",""]],null,null,null,null,null)),l["\u0275did"](29,16384,[[3,4]],0,G.o,[],null,null),(e()(),l["\u0275ted"](30,null,[" "," "])),l["\u0275ppd"](31,2),(e()(),l["\u0275eld"](32,0,null,4,10,"sidepanel-list-item",[["expanded","true"],["hideToggle","true"],["id","sideDateList"],["label","Date Created"],["showCount","false"]],null,null,null,oe.b,oe.a)),l["\u0275did"](33,114688,null,0,se.a,[],{label:[0,"label"],items:[1,"items"],showCount:[2,"showCount"],expanded:[3,"expanded"],hideToggle:[4,"hideToggle"]},null),(e()(),l["\u0275eld"](34,0,null,0,8,"mat-list-item",[["class","list-divider mat-list-item"]],[[24,"@slideInOutAnimation",0],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],[[null,"focus"],[null,"blur"]],function(e,n,t){var i=!0;return"focus"===n&&(i=!1!==l["\u0275nov"](e,35)._handleFocus()&&i),"blur"===n&&(i=!1!==l["\u0275nov"](e,35)._handleBlur()&&i),i},ue.e,ue.b)),l["\u0275did"](35,1097728,null,3,ce.c,[l.ElementRef,[2,ce.f]],null,null),l["\u0275qud"](603979776,6,{_lines:1}),l["\u0275qud"](335544320,7,{_avatar:0}),l["\u0275qud"](335544320,8,{_icon:0}),(e()(),l["\u0275eld"](39,0,null,1,3,"h4",[["class","side-list-item mat-line"],["mat-line",""]],null,null,null,null,null)),l["\u0275did"](40,16384,[[6,4]],0,G.o,[],null,null),(e()(),l["\u0275ted"](41,null,[" "," "])),l["\u0275ppd"](42,2),(e()(),l["\u0275eld"](43,0,null,1,6,"mat-sidenav-content",[["class","sidenavContentPolyfill320 mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,X.e,X.c)),l["\u0275did"](44,1097728,[[2,4]],0,K.g,[l.ChangeDetectorRef,K.f],null,null),(e()(),l["\u0275eld"](45,0,null,0,4,"div",[["class","main-panel"]],null,null,null,null,null)),(e()(),l["\u0275eld"](46,0,null,null,1,"result-header",[],null,null,null,Se,je)),l["\u0275did"](47,114688,null,0,_e,[ye,E.n],{baselineId:[0,"baselineId"],published:[1,"published"],currentBaseline:[2,"currentBaseline"]},null),(e()(),l["\u0275eld"](48,0,null,null,1,"summary-report",[],null,null,null,Ge,Fe)),l["\u0275did"](49,114688,null,0,qe,[ye],null,null)],function(e,n){var t=n.component;e(n,1,0),e(n,5,0,"side","true"),e(n,7,0,"320",e(n,10,0,l["\u0275unv"](n,7,1,e(n,9,0,l["\u0275nov"](n.parent.parent,0),l["\u0275unv"](n,7,1,l["\u0275nov"](n,8).transform(t.baselineName)))))),e(n,12,0,"Edit","mode_edit"),e(n,14,0,"Share","share","true"),e(n,16,0,"Delete","delete"),e(n,18,0,"Baselines","1200px","400px",t.masterListOptions.dataSource,t.masterListOptions.columns),e(n,20,0,t.currentBaseline),e(n,22,0,"Date Last Modified",t.calculationService.baseline.modified,"false","true","true"),e(n,33,0,"Date Created",t.calculationService.baseline.created,"false","true","true"),e(n,47,0,t.calculationService.baseline.id,t.calculationService.baseline.metaProperties.published?t.calculationService.baseline.modified:void 0,t.calculationService.baseline),e(n,49,0)},function(e,n){var t=n.component;e(n,0,0,l["\u0275nov"](n,1)._backdropOverride),e(n,4,0,l["\u0275nov"](n,5)._animationState,null,"end"===l["\u0275nov"](n,5).position,"over"===l["\u0275nov"](n,5).mode,"push"===l["\u0275nov"](n,5).mode,"side"===l["\u0275nov"](n,5).mode,l["\u0275nov"](n,5).fixedInViewport,l["\u0275nov"](n,5).fixedInViewport?l["\u0275nov"](n,5).fixedTopGap:null,l["\u0275nov"](n,5).fixedInViewport?l["\u0275nov"](n,5).fixedBottomGap:null),e(n,23,0,void 0,l["\u0275nov"](n,24)._avatar||l["\u0275nov"](n,24)._icon,l["\u0275nov"](n,24)._avatar||l["\u0275nov"](n,24)._icon),e(n,30,0,l["\u0275unv"](n,30,0,e(n,31,0,l["\u0275nov"](n.parent.parent,1),t.calculationService.baseline.modified,"medium"))),e(n,34,0,void 0,l["\u0275nov"](n,35)._avatar||l["\u0275nov"](n,35)._icon,l["\u0275nov"](n,35)._avatar||l["\u0275nov"](n,35)._icon),e(n,41,0,l["\u0275unv"](n,41,0,e(n,42,0,l["\u0275nov"](n.parent.parent,1),t.calculationService.baseline.created,"medium"))),e(n,43,0,l["\u0275nov"](n,44)._container._contentMargins.left,l["\u0275nov"](n,44)._container._contentMargins.right)})}function Pn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","fadeIn"],["id","newAssessmentsSummary"]],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,null,1,null,xn)),l["\u0275did"](2,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null)],function(e,n){e(n,2,0,void 0!==n.component.calculationService.baseline,l["\u0275nov"](n.parent,5))},null)}function Tn(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"loading-spinner",[],null,null,null,We.b,We.a)),l["\u0275did"](1,49152,null,0,Ve.a,[],null,null)],null,null)}function En(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"div",[["class","container"]],null,null,null,null,null)),(e()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","row mt-15"]],null,null,null,null,null)),(e()(),l["\u0275eld"](2,0,null,null,2,"div",[["class","col-xs-10 col-xs-offset-1"]],null,null,null,null,null)),(e()(),l["\u0275eld"](3,0,null,null,1,"error-card",[["errorBody","404: The request URL was not found in the application."],["errorTitle","Baseline Not Found"]],null,null,null,Ue.b,Ue.a)),l["\u0275did"](4,49152,null,0,ze.a,[],{errorTitle:[0,"errorTitle"],errorBody:[1,"errorBody"]},null)],function(e,n){e(n,4,0,"Baseline Not Found","404: The request URL was not found in the application.")},null)}function Mn(e){return l["\u0275vid"](0,[l["\u0275pid"](0,He.a,[]),l["\u0275pid"](0,P.e,[l.LOCALE_ID]),(e()(),l["\u0275and"](16777216,null,null,1,null,Pn)),l["\u0275did"](3,16384,null,0,P.o,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["\u0275and"](0,[["loadingBlock",2]],null,0,null,Tn)),(e()(),l["\u0275and"](0,[["notFound",2]],null,0,null,En))],function(e,n){e(n,3,0,n.component.finishedLoading,l["\u0275nov"](n,4))},null)}var Bn=l["\u0275ccf"]("summary",kn,function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"summary",[],null,null,null,Mn,Rn)),l["\u0275did"](1,245760,null,0,kn,[T.a,T.l,ie.e,E.n,E.n,Ke.a,Xe.a,ye],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),In=t("ZYjt"),Ln=t("M2Lx"),Dn=t("uGex"),qn=t("NaJL"),Fn=t("Axip"),Nn=t("4tE/"),Gn=t("mVsa"),Wn=t("4epT"),Vn=t("LOpI"),Un=t("t/Na"),zn=t("7dP1"),Hn=t("nb3L"),$n=t("xYQj"),Yn=t("9Z1F"),Jn=function(){function e(e,n,t){this.router=e,this.store=n,this.baselineService=t,this.demoMode="DEMO"===Cn.a.runMode,this.CREATE_URL="baseline/create"}return e.prototype.canActivate=function(e,n){var t=this;return this.store.select("users").pipe(Object(Ye.a)(1),Object(f.a)("userProfile"),Object(jn.a)(function(e){return t.baselineService.getLatestAssessments().pipe(Object(g.a)(function(e){return void 0===e||0===e.length?(t.router.navigate([t.CREATE_URL]),!1):(t.router.navigate(["/baseline/result/summary",e[0].id]),!0)}),Object(Yn.a)(function(e){return console.log("error in route gaurd, routing to create page",e),t.router.navigate([t.CREATE_URL]),Object($e.a)(!1)}))}))},e}(),Zn=t("Blfk"),Xn=t("w+lc"),Kn=t("4c35"),Qn=t("y4qS"),et=t("BHnd"),nt=t("6TXw"),tt=t("6Wmm"),lt=t("u7R8"),it=t("/dO6"),at=t("YhbO"),rt=t("jlZm"),ot=t("LC5p"),st=t("9It4"),ut=t("8mMr"),ct=t("w1+i"),dt=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},pt=function(e){var n={baselines:new Array,baseline:new Oe.AssessmentSet,blAttackPatterns:new Array,blCompleteAPs:0,blCompleteWeightings:0,blWeightings:{protPct:0,detPct:0,respPct:0},blGroups:new Array,summary:new Oe.AssessmentSet,finishedLoading:!1,summaryAggregations:[],finishedLoadingSummaryAggregationData:!1};return e&&Object.assign(n,e),n},bt=pt();function ft(e,n){switch(void 0===e&&(e=bt),n.type){case cn:return pt();case Qe:return pt(dt({},e));case en:return pt(dt({},e,{baselines:n.payload.slice()}));case nn:return pt(dt({},e,{baseline:n.payload}));case tn:return pt(dt({},e,{blAttackPatterns:n.payload.apList.slice(),blCompleteAPs:n.payload.completeAPs,blCompleteWeightings:n.payload.completeWeightings}));case ln:return pt(dt({},e,{blWeightings:n.payload}));case rn:return pt(dt({},e,{blGroups:n.payload.slice()}));case on:return pt(dt({},e,{finishedLoading:n.payload}));case un:return pt(dt({},e,{finishedLoadingSummaryAggregationData:n.payload}));case sn:return pt(dt({},e,{summaryAggregations:n.payload.slice()}));default:return e}}var mt=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},ht=function(e){var n=new p.AssessmentSet;n.assessments=n.assessments||[];var t={allAttackPatterns:[],backButton:!1,baseline:n,baselineCapabilities:[],baselineGroups:[],capabilities:[],capabilityGroups:[],currentCapability:new p.Capability,currentCapabilityGroup:new p.Category,currentObjectAssessment:new p.ObjectAssessment,finishedLoading:!1,baselineObjAssessments:[],page:1,saved:{finished:!1,id:""},selectedFrameworkAttackPatterns:[],showSummary:!1};return e&&Object.assign(t,e),t},gt=ht();function vt(e,n){switch(void 0===e&&(e=gt),n.type){case u.i:return ht();case u.l:return ht(mt({},e));case u.K:case u.G:return ht(mt({},e,{baseline:n.payload}));case u.I:return ht(mt({},e,{baselineObjAssessments:n.payload}));case u.y:var t=n.payload,l=e.baselineGroups.filter(function(e){return e.id!==t.id});return ht(mt({},e,{baselineGroups:l.slice()}));case u.N:return ht(mt({},e,{capabilityGroups:n.payload.slice()}));case u.R:case u.L:return ht(mt({},e,{baselineGroups:n.payload.slice()}));case u.P:return ht(mt({},e,{currentCapabilityGroup:n.payload}));case u.M:return ht(mt({},e,{capabilities:n.payload.slice()}));case u.c:var i=e.baselineCapabilities.slice();return i.push(n.payload),ht(mt({},e,{baselineCapabilities:i}));case u.A:var a=n.payload[0],r=n.payload[1],o=e.baselineCapabilities.slice();return o[o.indexOf(a)]=r,ht(mt({},e,{baselineCapabilities:o}));case u.x:var s=n.payload.slice(),c=e.baselineCapabilities.slice();return s.forEach(function(e){var n=c.indexOf(e);c.splice(n,1)}),ht(mt({},e,{baselineCapabilities:c}));case u.H:return ht(mt({},e,{baselineCapabilities:n.payload.slice()}));case u.O:return ht(mt({},e,{currentCapability:n.payload}));case u.d:var d=n.payload,b=e.baseline;b.assessments.push(d.id);var f=e.baselineObjAssessments.slice();return f.push(d),ht(mt({},e,{baseline:b,baselineObjAssessments:f}));case u.z:var m=e.baseline,h=e.baselineObjAssessments;return n.payload.forEach(function(e){var n=h.findIndex(function(n){return n.id===e.id});h.splice(n,1);var t=m.assessments.findIndex(function(n){return n===e.id});m.assessments.splice(t,1)}),ht(mt({},e,{baseline:m,baselineObjAssessments:h}));case u.Q:return ht(mt({},e,{currentObjectAssessment:n.payload}));case u.J:return ht(mt({},e,{allAttackPatterns:n.payload.slice()}));case u.S:return ht(mt({},e,{selectedFrameworkAttackPatterns:n.payload.slice()}));case u.T:return ht(mt({},e,{baseline:n.payload}));case u.Ja:var g=new p.AssessmentSet;if("string"==typeof n.payload)g.name=n.payload;else{var v=n.payload;g.name=v.title,g.description=v.description,g.created_by_ref=v.created_by_ref}return ht(mt({},e,{baseline:g}));case u.o:return ht(mt({},e,{finishedLoading:n.payload,backButton:!0}));case u.p:return ht(mt({},e,{saved:mt({},n.payload)}));case u.F:case u.K:return ht(mt({},e,{baseline:n.payload}));default:return e}}var yt=t("jYNz"),Ot=t("G5J1"),_t=t("VNr4"),jt=t("psW0"),Ct=function(){function e(e,n,t,l,i){var a=this;this.router=e,this.location=n,this.actions$=t,this.baselineService=l,this.attackPatternService=i,this.fetchBaselineData=this.actions$.ofType(Qe).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){return a.baselineService.fetchBaselines(!0).pipe(Object(jt.a)(function(n){var t=n.find(function(n){return n.id===e});return[new pn(n),new bn(t)]}),Object(Yn.a)(function(e){return Object(Ot.b)()}))})),this.setBaseline=this.actions$.ofType(nn).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){return a.baselineService.fetchObjectAssessmentsByAssessmentSet(e)}),Object(jt.a)(function(e){var n=[],t=0,l=0,i=0,r=0,o=0,s=e.map(function(e){return e.assessed_objects.map(function(e){n.indexOf(e.assessed_object_ref)<0&&n.push(e.assessed_object_ref),e.questions.map(function(e){"protect"===e.name&&""!==e.score&&(i+=a.toWeight(e.score),l++),"detect"===e.name&&""!==e.score&&(r+=a.toWeight(e.score),l++),"respond"===e.name&&""!==e.score&&(o+=a.toWeight(e.score),l++)}),""!==e.questions[0].score&&""!==e.questions[1].score&&""!==e.questions[2].score&&(t+=1)}),a.baselineService.fetchCapability(e.object_ref)});return 0===s.length?[new fn({apList:n,completeAPs:t,completeWeightings:l}),new hn([])]:_t.a.apply(void 0,s).pipe(Object(jt.a)(function(e){var a=i,s=r,u=o;return[new fn({apList:n,completeAPs:t,completeWeightings:l}),new mn({protPct:a,detPct:s,respPct:u}),new hn(e)]}),Object(Yn.a)(function(e){return console.log(e),Object(Ot.b)()}))})),this.setAndReadCapabilities=this.actions$.ofType(an).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n=new Array;return e.map(function(e){n.indexOf(e.category)<0&&n.push(e.category)}),[new gn(n),new vn(!0)]}))}return e.prototype.toWeight=function(e){if(!e)return 0;switch(e.toLowerCase()){case"s":return.9;case"m":return.6;case"l":return.3;default:return 0}},Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"fetchBaselineData",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"setBaseline",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"setAndReadCapabilities",void 0),e}(),At=t("IAiq"),wt=t("/PH2"),St=t("xMyE"),kt=t("sGzu"),Rt=t("cc7B"),xt=t("JsBv"),Pt=function(){function e(e,n,t,l,i,a,r,o){var s=this;this.actions$=e,this.attackPatternService=n,this.baselineService=t,this.baselineStateService=l,this.genericServiceApi=i,this.location=a,this.router=r,this.store=o,this.fetchBaseline=this.actions$.ofType(u.l).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){return s.baselineService.fetchAssessmentSet(e)}),Object(g.a)(function(e){return new u.V(e)})),this.setAndReadAssessmentSet=this.actions$.ofType(u.G).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){return s.baselineService.fetchObjectAssessmentsByAssessmentSet(e)}),Object(g.a)(function(e){return new u.X(e)})),this.setAndReadObjectAssessments=this.actions$.ofType(u.I).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n=e.map(function(e){return s.baselineService.fetchCapability(e.object_ref)});return 0===n.length?Object($e.a)(new u.W([])):_t.a.apply(void 0,n).pipe(Object(g.a)(function(e){return new u.W(e)}),Object(Yn.a)(function(e){return console.log(e),Object($e.a)(new u.q(!0))}))})),this.setAndReadCapabilities=this.actions$.ofType(u.H).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n=new Array;if(e.map(function(e){n.indexOf(e.category)<0&&n.push(e.category)}),0===n.length)return Object($e.a)(new Array);var t=n.map(function(e){return s.baselineService.fetchCategory(e)});return _t.a.apply(void 0,t)}),Object(g.a)(function(e){return new u.Ga(e)})),this.setInitialBaselineGroups=this.actions$.ofType(u.R).pipe(Object(f.a)("payload"),Object(g.a)(function(e){return new u.v(!0)})),this.setCurrentBaselineObjectAssessment=this.actions$.ofType(u.Q).pipe(Object(f.a)("payload"),Object(h.a)(function(e){return void 0!==e}),Object(jn.a)(function(e){var n={data:{attributes:e}},t=he.a.X_UNFETTER_OBJECT_ASSESSMENTS_URL;return e.id?s.genericServiceApi.patchAs(t=t+"/"+e.id,n):s.genericServiceApi.postAs(t,n)}),Object(jn.a)(function(){return Object($e.a)({})})),this.fetchCapabilityGroups=this.actions$.ofType(u.n).pipe(Object(jn.a)(function(){return s.baselineService.getCategories()}),Object(g.a)(function(e){return new u.Ca(e)})),this.fetchCapabilities=this.actions$.ofType(u.m).pipe(Object(jn.a)(function(){return s.baselineService.getCapabilities()}),Object(g.a)(function(e){return new u.Ba(e)})),this.fetchAttackPatterns=this.actions$.ofType(u.k).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n=Object($e.a)(e),t=s.attackPatternService.fetchAttackPatterns().pipe(Object(Yn.a)(function(e){return Object($e.a)([])}));return Object(_t.a)(n,t)}),Object(jt.a)(function(e){var n=e[0],t=e[1],l=t;return n&&(l=t.filter(function(e){return e&&e.kill_chain_phases.findIndex(function(e){return e.kill_chain_name===n})>-1})),[new u.Y(t),new u.Ha(l)]})),this.startAssessment=this.actions$.ofType(u.T).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n=new d;return n.title=e.name,n.description=e.description,n.created_by_ref=e.created_by_ref,s.baselineStateService.saveCurrent(n),s.genericServiceApi.postAs("api/v3/x-unfetter-assessment-sets",{data:{attributes:e}})}),Object(St.a)(function(e){s.router.navigate(["/baseline/wizard/new"])}),Object(g.a)(function(e){return new u.Z(e[0].attributes)})),this.saveBaseline=this.actions$.ofType(u.F).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n={data:{attributes:e}},t=he.a.X_UNFETTER_ASSESSMENT_SETS_URL;return e.id?s.genericServiceApi.patchAs(t=t+"/"+e.id,n):s.genericServiceApi.postAs(t,n)}),Object(g.a)(function(e){return new u.w({finished:!0,id:e.id||""})})),this.addCapabilityGroup=this.actions$.ofType(u.b).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n={data:{attributes:e}},t=he.a.X_UNFETTER_CATEGORY_URL;return e.id?s.genericServiceApi.patchAs(t=t+"/"+e.id,n):s.genericServiceApi.postAs(t,n)}),Object(g.a)(function(e){return new u.u})),this.addCapability=this.actions$.ofType(u.a).pipe(Object(f.a)("payload"),Object(jn.a)(function(e){var n={data:{attributes:e}},t=he.a.X_UNFETTER_CAPABILITY_URL;return e.id?s.genericServiceApi.patchAs(t=t+"/"+e.id,n):s.genericServiceApi.postAs(t,n)}),Object(g.a)(function(e){return new u.t})),this.removeCapabilityGroupFromBaseline=this.actions$.ofType(u.y).pipe(Object(f.a)("payload"),Object(wt.a)(this.store.select("baseline").pipe(Object(f.a)("baselineCapabilities"))),Object(g.a)(function(e){var n=e[0],t=e[1].filter(function(e){return e.category===n.id});return new u.B(t)})),this.addCapabilityToBaselineCapabilities=this.actions$.ofType(u.c).pipe(Object(f.a)("payload"),Object(wt.a)(this.store.select("baseline").pipe(Object(f.a)("capabilityGroups"))),Object(jt.a)(function(e){var n=e[0],t=e[1],l=s.createObjAssessment(n),i=t.find(function(e){return e.id===n.category});return l.assessed_objects=i.assessed_objects,s.genericServiceApi.postAs(he.a.X_UNFETTER_OBJECT_ASSESSMENTS_URL,{data:{attributes:l}}).pipe(Object(g.a)(xt.a.mapAttributes),Object(g.a)(function(e){return new u.h(e[0])}),Object(Yn.a)(function(e){return console.log(e),Object($e.a)()}))})),this.replaceCapabilityInBaseline=this.actions$.ofType(u.A).pipe(Object(f.a)("payload"),Object(wt.a)(this.store.select("baseline").pipe(Object(f.a)("baselineObjAssessments"))),Object(jt.a)(function(e){var n=e[0],t=e[1],l=s.createObjAssessment(n[1]),i=t.filter(function(e){return e.object_ref===n[0].id});return[new u.h(l),new u.D(i)]})),this.addObjectAssessmentToBaseline=this.actions$.ofType(u.d).pipe(Object(f.a)("payload"),Object(wt.a)(this.store.select("baseline").pipe(Object(f.a)("baseline"))),Object(jt.a)(function(e){var n=e[1],t=he.a.X_UNFETTER_ASSESSMENT_SETS_URL;return s.genericServiceApi.patchAs(t=t+"/"+n.id,{data:{attributes:n}}).pipe(Object(g.a)(xt.a.mapAttributes),Object(g.a)(function(e){return new u.Z(e)}),Object(Yn.a)(function(e){return console.log(e),Object($e.a)()}))})),this.removeCapabilitiesFromBaselineCapabilities=this.actions$.ofType(u.x).pipe(Object(f.a)("payload"),Object(wt.a)(this.store.select("baseline").pipe(Object(f.a)("baselineObjAssessments"))),Object(jt.a)(function(e){var n=e[0],t=e[1],l=new Array,i=n.map(function(e){var n=t.find(function(n){return n.object_ref===e.id});return l.push(n),s.genericServiceApi.delete(he.a.X_UNFETTER_OBJECT_ASSESSMENTS_URL+"/"+n.id)});return _t.a.apply(void 0,i).pipe(Object(g.a)(function(e){return new u.D(l)}),Object(Yn.a)(function(e){return console.log(e),Object($e.a)(new u.q(!0))}))})),this.removeObjectAssessmentsFromBaseline=this.actions$.ofType(u.z).pipe(Object(f.a)("payload"),Object(wt.a)(this.store.select("baseline").pipe(Object(f.a)("baseline"))),Object(jt.a)(function(e){var n=e[1];return s.genericServiceApi.patch(he.a.X_UNFETTER_ASSESSMENT_SETS_URL+"/"+n.id,{data:{attributes:n}}).pipe(Object(g.a)(xt.a.mapAttributes),Object(g.a)(function(e){return new u.Z(e)}),Object(Yn.a)(function(e){return console.log(e),Object($e.a)()}))}))}return e.prototype.createObjAssessment=function(e){var n=new p.ObjectAssessment;n.object_ref=e.id,n.assessed_objects=[];var t=new kt.ExpandedStix;return t.type=Rt.StixEnum.OBJECT_ASSESSMENT,t.description=e.description,t.name=e.name,t.created_by_ref=e.created_by_ref,Object.assign(n,t),n},Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"fetchBaseline",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"setAndReadAssessmentSet",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"setAndReadObjectAssessments",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"setAndReadCapabilities",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"setInitialBaselineGroups",void 0),Object(ge.__decorate)([Object(yt.b)({dispatch:!1}),Object(ge.__metadata)("design:type",Object)],e.prototype,"setCurrentBaselineObjectAssessment",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"fetchCapabilityGroups",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"fetchCapabilities",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"fetchAttackPatterns",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"startAssessment",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"saveBaseline",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"addCapabilityGroup",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"addCapability",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"removeCapabilityGroupFromBaseline",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"addCapabilityToBaselineCapabilities",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"replaceCapabilityInBaseline",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"addObjectAssessmentToBaseline",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"removeCapabilitiesFromBaselineCapabilities",void 0),Object(ge.__decorate)([Object(yt.b)(),Object(ge.__metadata)("design:type",Object)],e.prototype,"removeObjectAssessmentsFromBaseline",void 0),e}(),Tt=t("w1EH"),Et=function(){function e(e){if(this.parent=e,this.metaDataSubject=new v.a(new d),this.metaData$=this.metaDataSubject.asObservable(),e)throw new Error("BaselineStateService is already loaded.")}return e.prototype.saveCurrent=function(e){return this.metaDataSubject.next(e),this.metaData$},e.prototype.currentMeta=function(){return this.metaData$.pipe(Object(Tt.a)())},e.ngInjectableDef=l.defineInjectable({factory:function(){return new e(l.inject(e,12))},token:e,providedIn:"root"}),e}(),Mt=t("bEtF"),Bt=function(){},It=t("YSh2"),Lt=t("Wmeo");t.d(n,"BaselineModuleNgFactory",function(){return Dt});var Dt=l["\u0275cmf"](O,[],function(e){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[_.a,j.a,C.a,A.a,D,Z,Bn]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,P.q,P.p,[l.LOCALE_ID,[2,P.E]]),l["\u0275mpd"](4608,c.g,c.g,[]),l["\u0275mpd"](4608,c.B,c.B,[]),l["\u0275mpd"](4608,In.f,G.e,[[2,G.i],[2,G.n]]),l["\u0275mpd"](4608,Le.c,Le.c,[Le.i,Le.e,l.ComponentFactoryResolver,Le.h,Le.f,l.Injector,l.NgZone,P.d,W.b]),l["\u0275mpd"](5120,Le.j,Le.k,[Le.c]),l["\u0275mpd"](4608,Ln.c,Ln.c,[]),l["\u0275mpd"](5120,Dn.a,Dn.b,[Le.c]),l["\u0275mpd"](5120,qn.b,qn.c,[]),l["\u0275mpd"](5120,Fn.d,Fn.a,[In.b,qn.b,[3,Fn.d]]),l["\u0275mpd"](5120,Nn.b,Nn.c,[Le.c]),l["\u0275mpd"](4608,G.d,G.d,[]),l["\u0275mpd"](5120,ie.c,ie.d,[Le.c]),l["\u0275mpd"](4608,ie.e,ie.e,[Le.c,l.Injector,[2,P.j],[2,ie.b],ie.c,[3,ie.e],Le.e]),l["\u0275mpd"](5120,Gn.b,Gn.g,[Le.c]),l["\u0275mpd"](5120,Ie.b,Ie.c,[Le.c]),l["\u0275mpd"](5120,Wn.c,Wn.a,[[3,Wn.c]]),l["\u0275mpd"](4608,Vn.c,Vn.c,[[2,Un.c],In.c,Vn.d]),l["\u0275mpd"](4608,zn.a,zn.a,[T.l,E.n]),l["\u0275mpd"](4608,Hn.a,Hn.a,[]),l["\u0275mpd"](4608,$n.a,$n.a,[]),l["\u0275mpd"](4608,ye,ye,[]),l["\u0275mpd"](4608,Jn,Jn,[T.l,E.n,Ke.a]),l["\u0275mpd"](1073742336,P.c,P.c,[]),l["\u0275mpd"](1073742336,c.y,c.y,[]),l["\u0275mpd"](1073742336,c.v,c.v,[]),l["\u0275mpd"](1073742336,c.n,c.n,[]),l["\u0275mpd"](1073742336,T.p,T.p,[[2,T.v],[2,T.l]]),l["\u0275mpd"](1073742336,W.a,W.a,[]),l["\u0275mpd"](1073742336,G.n,G.n,[[2,G.f]]),l["\u0275mpd"](1073742336,a.h,a.h,[]),l["\u0275mpd"](1073742336,Zn.c,Zn.c,[]),l["\u0275mpd"](1073742336,Xn.b,Xn.b,[]),l["\u0275mpd"](1073742336,Kn.g,Kn.g,[]),l["\u0275mpd"](1073742336,S.b,S.b,[]),l["\u0275mpd"](1073742336,me.b,me.b,[]),l["\u0275mpd"](1073742336,Le.g,Le.g,[]),l["\u0275mpd"](1073742336,G.z,G.z,[]),l["\u0275mpd"](1073742336,G.x,G.x,[]),l["\u0275mpd"](1073742336,G.u,G.u,[]),l["\u0275mpd"](1073742336,Ln.d,Ln.d,[]),l["\u0275mpd"](1073742336,q.e,q.e,[]),l["\u0275mpd"](1073742336,Dn.d,Dn.d,[]),l["\u0275mpd"](1073742336,Qn.p,Qn.p,[]),l["\u0275mpd"](1073742336,et.m,et.m,[]),l["\u0275mpd"](1073742336,k.a,k.a,[]),l["\u0275mpd"](1073742336,fe.j,fe.j,[]),l["\u0275mpd"](1073742336,qn.a,qn.a,[]),l["\u0275mpd"](1073742336,Fn.c,Fn.c,[]),l["\u0275mpd"](1073742336,Vn.b,Vn.b,[]),l["\u0275mpd"](1073742336,nt.b,nt.b,[]),l["\u0275mpd"](1073742336,Nn.e,Nn.e,[]),l["\u0275mpd"](1073742336,tt.b,tt.b,[]),l["\u0275mpd"](1073742336,i.c,i.c,[]),l["\u0275mpd"](1073742336,lt.d,lt.d,[]),l["\u0275mpd"](1073742336,r.c,r.c,[]),l["\u0275mpd"](1073742336,it.e,it.e,[]),l["\u0275mpd"](1073742336,ie.k,ie.k,[]),l["\u0275mpd"](1073742336,at.c,at.c,[]),l["\u0275mpd"](1073742336,rt.c,rt.c,[]),l["\u0275mpd"](1073742336,o.b,o.b,[]),l["\u0275mpd"](1073742336,V.c,V.c,[]),l["\u0275mpd"](1073742336,s.c,s.c,[]),l["\u0275mpd"](1073742336,G.p,G.p,[]),l["\u0275mpd"](1073742336,ot.a,ot.a,[]),l["\u0275mpd"](1073742336,ce.d,ce.d,[]),l["\u0275mpd"](1073742336,Gn.e,Gn.e,[]),l["\u0275mpd"](1073742336,Ie.e,Ie.e,[]),l["\u0275mpd"](1073742336,Wn.d,Wn.d,[]),l["\u0275mpd"](1073742336,st.c,st.c,[]),l["\u0275mpd"](1073742336,K.h,K.h,[]),l["\u0275mpd"](1073742336,ut.b,ut.b,[]),l["\u0275mpd"](1073742336,ct.a,ct.a,[]),l["\u0275mpd"](1073742336,De.ChartsModule,De.ChartsModule,[]),l["\u0275mpd"](1024,E.j,function(){return[{key:"baselineSummary",reducerFactory:E.z,metaReducers:[],initialState:void 0},{key:"baseline",reducerFactory:E.z,metaReducers:[],initialState:void 0}]},[]),l["\u0275mpd"](1024,E.q,function(){return[ft,vt]},[]),l["\u0275mpd"](1024,E.r,function(e,n){return[e,n]},[E.q,E.q]),l["\u0275mpd"](1024,E.b,function(e,n,t,l,i,a){return[E.w(e,n,t),E.w(l,i,a)]},[l.Injector,E.q,E.r,l.Injector,E.q,E.r]),l["\u0275mpd"](1073873408,E.o,E.o,[E.j,E.b,E.g,E.p]),l["\u0275mpd"](512,Ct,Ct,[T.l,P.j,yt.a,Ke.a,At.a]),l["\u0275mpd"](512,Pt,Pt,[yt.a,At.a,Ke.a,Et,Mt.a,P.j,T.l,E.n]),l["\u0275mpd"](1024,yt.i,function(e,n){return[yt.e(e),yt.e(n)]},[Ct,Pt]),l["\u0275mpd"](1073742336,yt.g,yt.g,[yt.f,yt.i,[2,E.p],[2,E.o]]),l["\u0275mpd"](1073742336,Bt,Bt,[]),l["\u0275mpd"](1073742336,O,O,[]),l["\u0275mpd"](256,it.a,{separatorKeyCodes:[It.f]},[]),l["\u0275mpd"](256,Vn.d,ct.b,[]),l["\u0275mpd"](256,Lt.a,ct.c,[]),l["\u0275mpd"](1024,T.j,function(){return[[{path:"navigate",canActivate:[Jn]},{path:"",component:y,children:[{path:"create",component:b},{path:"wizard/new",loadChildren:"app/baseline/wizard/wizard.module#WizardModule"},{path:"wizard/edit/:baselineId",loadChildren:"app/baseline/wizard/wizard.module#WizardModule"}]},{path:"result/summary/:baselineId",component:kn}]]},[])])})},udNS:function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return a});var l=t("CcnG"),i=(t("LOpI"),l["\u0275crt"]({encapsulation:2,styles:[],data:{}}));function a(e){return l["\u0275vid"](0,[l["\u0275ncd"](null,0)],null,null)}}}]);